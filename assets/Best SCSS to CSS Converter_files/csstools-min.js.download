!function(){function d(t){var e="    ";if(isNaN(parseInt(t)))e=t;else switch(t){case 1:e=" ";break;case 2:e="  ";break;case 3:e="   ";break;case 4:e="    ";break;case 5:e="     ";break;case 6:e="      ";break;case 7:e="       ";break;case 8:e="        ";break;case 9:e="         ";break;case 10:e="          ";break;case 11:e="           ";break;case 12:e="            "}var n=["\n"];for(ix=0;ix<100;ix++)n.push(n[ix]+e);return n}function t(){this.step="\t",this.shift=d(this.step)}t.prototype.xml=function(t,e){var n=t.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),i=n.length,s=!1,r=0,o="",a=0,l=e?d(e):this.shift;for(a=0;a<i;a++)-1<n[a].search(/<!/)?(o+=l[r]+n[a],s=!0,(-1<n[a].search(/-->/)||-1<n[a].search(/\]>/)||-1<n[a].search(/!DOCTYPE/))&&(s=!1)):-1<n[a].search(/-->/)||-1<n[a].search(/\]>/)?(o+=n[a],s=!1):/^<\w/.exec(n[a-1])&&/^<\/\w/.exec(n[a])&&/^<[\w:\-\.\,]+/.exec(n[a-1])==/^<\/[\w:\-\.\,]+/.exec(n[a])[0].replace("/","")?(o+=n[a],s||r--):-1<n[a].search(/<\w/)&&-1==n[a].search(/<\//)&&-1==n[a].search(/\/>/)?o=o+=s?n[a]:l[r++]+n[a]:-1<n[a].search(/<\w/)&&-1<n[a].search(/<\//)?o=o+=s?n[a]:l[r]+n[a]:-1<n[a].search(/<\//)?o=o+=s?n[a]:l[--r]+n[a]:-1<n[a].search(/\/>/)?o=o+=s?n[a]:l[r]+n[a]:-1<n[a].search(/<\?/)?o+=l[r]+n[a]:-1<n[a].search(/xmlns\:/)||-1<n[a].search(/xmlns\=/)?o+=l[r]+n[a]:o+=n[a];return"\n"==o[0]?o.slice(1):o},t.prototype.json=function(t,e){e=e||this.step;return"undefined"==typeof JSON?t:"string"==typeof t?JSON.stringify(JSON.parse(t),null,e):"object"==typeof t?JSON.stringify(t,null,e):t},t.prototype.css=function(t,e){var n=t.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),i=n.length,s=0,r="",o=0,a=e?d(e):this.shift;for(o=0;o<i;o++)/\{/.exec(n[o])?r+=a[s++]+n[o]:/\}/.exec(n[o])?r+=a[--s]+n[o]:(/\*\\/.exec(n[o]),r+=a[s]+n[o]);return r.replace(/^\n{1,}/,"")},t.prototype.sql=function(t,e){var n,i,s,r=t.replace(/\s{1,}/g," ").replace(/\'/gi,"~::~'").split("~::~"),o=r.length,a=[],l=0,c=this.step,p=0,u="",h=0,f=e?d(e):this.shift;for(h=0;h<o;h++)a=h%2?a.concat(r[h]):a.concat((n=r[h],i=c,n.replace(/\s{1,}/g," ").replace(/ AND /gi,"~::~"+i+i+"AND ").replace(/ BETWEEN /gi,"~::~"+i+"BETWEEN ").replace(/ CASE /gi,"~::~"+i+"CASE ").replace(/ ELSE /gi,"~::~"+i+"ELSE ").replace(/ END /gi,"~::~"+i+"END ").replace(/ FROM /gi,"~::~FROM ").replace(/ GROUP\s{1,}BY/gi,"~::~GROUP BY ").replace(/ HAVING /gi,"~::~HAVING ").replace(/ IN /gi," IN ").replace(/ JOIN /gi,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /gi,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /gi,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /gi,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /gi,"~::~RIGHT JOIN ").replace(/ ON /gi,"~::~"+i+"ON ").replace(/ OR /gi,"~::~"+i+i+"OR ").replace(/ ORDER\s{1,}BY/gi,"~::~ORDER BY ").replace(/ OVER /gi,"~::~"+i+"OVER ").replace(/\(\s{0,}SELECT /gi,"~::~(SELECT ").replace(/\)\s{0,}SELECT /gi,")~::~SELECT ").replace(/ THEN /gi," THEN~::~"+i).replace(/ UNION /gi,"~::~UNION~::~").replace(/ USING /gi,"~::~USING ").replace(/ WHEN /gi,"~::~"+i+"WHEN ").replace(/ WHERE /gi,"~::~WHERE ").replace(/ WITH /gi,"~::~WITH ").replace(/ ALL /gi," ALL ").replace(/ AS /gi," AS ").replace(/ ASC /gi," ASC ").replace(/ DESC /gi," DESC ").replace(/ DISTINCT /gi," DISTINCT ").replace(/ EXISTS /gi," EXISTS ").replace(/ NOT /gi," NOT ").replace(/ NULL /gi," NULL ").replace(/ LIKE /gi," LIKE ").replace(/\s{0,}SELECT /gi,"SELECT ").replace(/\s{0,}UPDATE /gi,"UPDATE ").replace(/ SET /gi," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")));for(o=a.length,h=0;h<o;h++){s=a[h],p=p-(s.replace(/\(/g,"").length-s.replace(/\)/g,"").length),/\s{0,}\s{0,}SELECT\s{0,}/.exec(a[h])&&(a[h]=a[h].replace(/\,/g,",\n"+c+c)),/\s{0,}\s{0,}SET\s{0,}/.exec(a[h])&&(a[h]=a[h].replace(/\,/g,",\n"+c+c)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(a[h])?u+=f[++l]+a[h]:/\'/.exec(a[h])?(p<1&&l&&l--,u+=a[h]):(u+=f[l]+a[h],p<1&&l&&l--)}return u=u.replace(/^\n{1,}/,"").replace(/\n{1,}/g,"\n")},t.prototype.xmlmin=function(t,e){return(e?t:t.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns")).replace(/>\s{0,}</g,"><")},t.prototype.jsonmin=function(t){return"undefined"==typeof JSON?t:JSON.stringify(JSON.parse(t),null,0)},t.prototype.cssmin=function(t,e){return(e?t:t.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,"")).replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},t.prototype.sqlmin=function(t){return t.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")},window.vkbeautify=new t}();var previouskey,toolstype="json",isFullScreen=!1,userId=0;function preInitEditors(){if("json"==toolstype)createJsonEditor(),cleanJSONEditor("all"),setDataInInputEditor(getFromLocalStorage());else if("xml"==toolstype||"xml-viewer"==toolstype)createXMLEditor();else if("yaml"==toolstype)createYAMLEditor();else if("html"==toolstype)createHTMLEditor();else if("escaper"==toolstype)createEscaperEditor();else if("jsontree"==toolstype)createJsonTreeEditor();else if("excel"==toolstype)createExcelOutputEditor();else if("css"==toolstype)createCSSEditor();else{if("samples"!=toolstype)return;createSampleEditor()}}function postInitEditors(){$(document).ajaxSend(function(t,e,n){$("#pluswrap").removeClass("hide")}),$(document).ajaxComplete(function(t,e,n){$("#pluswrap").addClass("hide")}),isDataUrlAvailable(),handleCtrlV(),checkIfUserLoggedinlogin(),$("#fileopen").click(function(){openFile()}),$("#default_file").change(function(){formdata=new FormData,0<$(this).prop("files").length&&(file=$(this).prop("files")[0],formdata.append("userfile",file),readSelectedFile())})}function checkIfUserLoggedinlogin(){var t=getCookie("loggedinuser");""!=t?(userId=getCookie("loggedinuserid"),$("#loggedUserName").text(t),$("#loginDropdown").show(),$("#loginDiv").hide()):($("#loginDropdown").hide(),$("#loginDiv").show(),userId=0)}function getCookie(t){for(var e=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var s=n[i];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(e))return(e=s.substring(e.length,s.length)).replace(/\+/g," ")}return""}function defaultAction(){$("#defaultaction").click()}function preLogin(){storePreviousPageURL(),window.open("/login","_self")}function storePreviousPageURL(){localStorage&&localStorage.setItem("urlBeforeLogin",window.location.pathname)}function preLogout(){storePreviousPageURL(),window.open("/logout","_self")}function postLoginLogout(){var t=window.location.pathname;if(localStorage){var e=localStorage.getItem("urlBeforeLogin");e&&t!==e&&window.open(e,"_self")}}function isAceEditor(t){return $(t.container).hasClass("ace_editor")}function getOverlayClass(t){return isAceEditor(t)?"overlayaceeditor":void 0!==t&&t instanceof JSONEditor?"overlayjsoneditor":void 0}function addOverlay(t){"input"==t?($("#inputdiv").addClass("overlay"),$("#inputFullScreen").hide(),$("#inputCloseScreen").show(),fullscreenEditor="input",$("#inputeditor").addClass(getOverlayClass(inputEditor)),inputEditor.resize()):"output"==t&&($("#outputdiv").addClass("overlay"),$("#outputFullScreen").hide(),$("#outputCloseScreen").show(),fullscreenEditor="output",$("#outputeditor").addClass(getOverlayClass(outputEditor)),outputEditor.resize()),isFullScreen=!0,$("body").css("overflow","hidden")}function removeOverlay(t){"input"==t?($("#inputdiv").removeClass("overlay"),$("#inputFullScreen").show(),$("#inputCloseScreen").hide(),$("#inputeditor").removeClass(getOverlayClass(inputEditor)),inputEditor.resize()):"output"==t&&($("#outputdiv").removeClass("overlay"),$("#outputFullScreen").show(),$("#outputCloseScreen").hide(),$("#outputeditor").removeClass(getOverlayClass(outputEditor)),outputEditor.resize()),$("body").css("overflow",""),isFullScreen=!1}function updateFullScreenIcons(t){isFullScreen?"input"==t?($("#inputFullScreen").hide(),$("#inputCloseScreen").show(),fullscreenEditor="input"):"output"==t&&($("#outputFullScreen").hide(),$("#outputCloseScreen").show(),fullscreenEditor="output"):"input"==t?($("#inputFullScreen").show(),$("#inputCloseScreen").hide()):"output"==t&&($("#outputFullScreen").show(),$("#outputCloseScreen").hide())}function getCookie(t){for(var e=t+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var s=n[i];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(e))return(e=s.substring(e.length,s.length)).replace(/\+/g," ")}return""}function copyToClipboard(t){var e=$("<textarea>");$("body").append(e),e.val(t).select(),document.execCommand("copy"),e.remove(),$("#flymessage").toggleClass("in"),setTimeout(function(){$("#flymessage").removeClass("in")},2e3)}function setMessage(t,e,n){void 0===n&&(n=!0),$("#msgDiv").html("");var i="";i="success"==t?"/"==window.location.pathname?'<div class="alert alert-info" style="margin-top: 0px;margin-bottom: 5px;">':'<div class="alert alert-info" >':'<div class="alert alert-danger" >',i+='<a href="#" class="close" data-dismiss="alert" aria-label="close" id="errorClose">&times;</a>',i+="<label>"+e+"</label></div>",$("#msgDiv").html(i),n&&setTimeout(function(){$("#errorClose").click()},3e3)}function decodeSpecialCharacter(t){return t.replace(/\&amp;/g,"&").replace(/\&gt;/g,">").replace(/\&lt;/g,"<").replace(/\&quot;/g,'"')}function setModelTitle(t){"Formatted JSON"==t?addOutputIconstoEditor(!0):addOutputIconstoEditor()}function hideMessage(){$("#msgDiv").html(""),$("#outputeditor .menu").show()}function loadUrl(){var t=$("#path").val();5<t.trim().length&&($("#loadFileClose").click(),load(t))}function load(t){$.ajax({type:"post",url:"//codebeautify.com/URLService",dataType:"text",data:{path:t},success:function(t){null!=t&&null!=t&&0!=t.trim().length&&setExternalURLData(t)},error:function(t,e,n){setMessage("error","Failed to load data="+e),cleanJSONEditor("all")}})}function getDataFromUrlId(t){$.ajax({type:"post",url:"/service/getDataFromID",dataType:"json",data:{urlid:t,toolstype:toolstype},success:function(t){null!=t&&null!=t&&0!=t.length?setDataView(t):alert("This URL does not Exist.")},error:function(t,e,n){setMessage("error","Failed to load data="+n),cleanJSONEditor("editor"),cleanJSONEditor()}})}function setExternalURLData(t){"json"==toolstype?setJSONDataFromResponse(t):"xml"==toolstype?setXMLDataFromResponse(t):"yaml"==toolstype?yamlInputeditor.setValue(t):inputEditor.setValue(t)}function setDataView(t){$("#title").val(t.title),$("#tags").val(t.tags),$("#desc").val(t.desc),"json"==toolstype?setJSONDataFromResponse(t.content,t.lastaction):"xml"==toolstype?setXMLDataFromResponse(t.content,t.lastaction):"yaml"==toolstype?yamlInputeditor.setValue(t.content):inputEditor.setValue(t.content),userId=t.user_id,$("#id").val(t.id)}function setJSONDataFromResponse(e,t){try{var n=$.parseJSON(e);inputEditor.setText(JSON.stringify(n,null,2)),null!=t?updateJSONOutput(t):defaultAction()}catch(t){setMessage("error","Invalid JSON Data: "+t),inputEditor.setText(e)}}function setXMLDataFromResponse(t,e){try{inputEditor.setValue(t),null!=e?updateXMLOutput(e):defaultAction()}catch(t){setMessage("error","Invalid XML Data: "+t)}}function openFile(){$("input[type=file]").click()}function readSelectedFile(){$("#loadFileClose").click();$("#viewname").val();var t="/service/uploadFile";"excel-to-html"==$("#viewname").val()&&(t="SheetReader/uploadFile"),$.ajax({url:t,type:"POST",data:formdata,processData:!1,contentType:!1,success:function(t){"error"!=t?"excel-to-html"==$("#viewname").val()?converExcelToHtml(t):(setDataInInputEditor(t),defaultAction()):setMessage("error","Error in Loading File.")}})}function download(){var t=outputEditor.getText();if(0!=t.trim().length){if("function"!=typeof saveAs)return void $.loadScript("dist/js/vendor/FileSaver.min.js",download);var e=outputEditor.getMode();if("tree"===e||"form"===e||"view"===e){var n=$.parseJSON(t);t=JSON.stringify(n,null,2)}var i=new Blob([""+t],{type:"text/plain;charset=utf-8"});filename="jsonformatter.txt","jsonToxml"==last_action&&(filename="jsonformatter.xml"),saveAs(i,filename)}else setMessage("error","Sorry Result is Empty")}function clearInput(t){"saveDialog"==t?($("#desc").val(""),$("#title").val(""),$("#tags").val("")):$("#path").val("")}function handleCtrlV(){$(document).keyup(function(t){t.ctrlKey&&86==t.keyCode||17==previouskey&&86==t.keyCode?(defaultAction(),previouskey=-1):previouskey=t.keyCode})}function Action_Save(){if(0==("xml"==toolstype?inputEditor.getValue():"yaml"==toolstype?yamlInputeditor.getValue():"html"==toolstype?inputEditor.getValue():inputEditor.getText()).trim().length)showErrorDialog("Sorry,Input is Empty");else{var t=$("#dataUrl").val();0!=userId&&0!=t.trim().length?$("#btnUpdate").show():($("#btnUpdate").hide(),clearInput("saveDialog")),$("#openSave").click()}}function save(n){var t,e=$("#title").val();null!=e&&0!=e.length?($("#loadSaveClose").click(),t="xml"==toolstype?inputEditor.getValue():"yaml"==toolstype?yamlInputeditor.getValue():"html"==toolstype?inputEditor.getValue():inputEditor.getText(),$.ajax({url:"/service/save",dataType:"text",type:"post",async:!1,data:{content:t,title:$("#title").val(),id:$("#id").val(),user_id:userId,desc:$("#desc").val(),tags:$("#tags").val().trim(),viewname:$("#viewname").val().trim(),lastaction:last_action,toolstype:toolstype},success:function(t){if("error"!=t){var e=null;setMessage("success","Data saved successfully - <a class='white' href ='"+(e="index"==$("#viewname").val().trim()?"https://"+location.host+"/"+t:"https://"+location.host+"/"+$("#viewname").val().trim()+"/"+t)+"'>"+e+"</a>",!1),null!=n&&shareLink(e)}else alert("Please validate the input and try again.")},error:function(t,e,n){setMessage("error","Error in data saving")}})):alert("Title is required")}function update(){var t;$("#loadSaveClose").click(),t="xml"==toolstype?inputEditor.getValue():"yaml"==toolstype?yamlInputeditor.getValue():"html"==toolstype?inputEditor.getValue():inputEditor.getText(),$.ajax({url:"/service/update",dataType:"text",type:"post",data:{id:$("#id").val(),content:t,title:$("#title").val(),desc:$("#desc").val(),tags:$("#tags").val().trim()},success:function(t){setMessage("success","Data updatd successfully")},error:function(t,e,n){setMessage("error","Error in data updating")}})}function shareLink(t){"google"==getProvider()?window.open("https://plus.google.com/share?url="+t,"_blank"):window.open("https://www.facebook.com/sharer/sharer.php?u="+t,"_blank")}$(function(){if($(window).scrollTop(0),"recentLinks"==(toolstype=$("#type").val().trim())){var t=$("#clickedLink").val()+"Link";$("#linkDiv a.disabled").removeClass("disabled").addClass("active"),$("#linkDiv a#"+t).removeClass("active").addClass("disabled")}0!=$("#inputeditor").length&&preInitEditors()}),jQuery.loadScript=function(t,e){$.ajaxSetup({cache:!0}),jQuery.ajax({url:t,dataType:"script",success:e,async:!0}),$.ajaxSetup({cache:!1})},$(document).keyup(function(t){27==t.keyCode&&removeOverlay(fullscreenEditor)}),$(".navbar-collapse ul li a").click(function(){$(".navbar-toggle:visible").click()});var old,online=function(t){var e=(new Date).getTime()/1e3;return t&&t.access_token&&t.expires>e};function isDataUrlAvailable(){if(0!=$("#dataUrl").length){var t=$("#dataUrl").val();0!=t.trim().length&&(6==t.trim().length?getDataFromUrlId(t):load(t))}}function saveToLocalStorage(t){localStorage&&(localStorage.setItem($("#viewname").val(),""),localStorage.setItem($("#viewname").val(),t))}function getFromLocalStorage(){if(localStorage){var t=localStorage.getItem($("#viewname").val());if(null!=t&&"URL is not valid."!=t)return t}return""}function showErrorDialog(t){$("#errorMsg").text(t),$("#openError").click()}function htmlOutput(t){var e=t;if(void 0===t&&(e="html-editor"==$("#viewname").val()?$("#summernote").summernote("code"):inputEditor.getValue()),0<e.trim().length){var n=document.getElementById("result1").contentWindow.document;old!=e&&(old=e,n.open(),n.write(old),n.close()),$("html, body").animate({scrollTop:0},10)}}function getCSVTOTSV(t){return t.split(",").join("\t")}function toHTML(t){if(0!=t.trim().length){rows="",thead="<tr>";var e=Papa.parse(t),n=e.data,i=n.slice(1,n.length);i.sort(function(t,e){return e.length-t.length}),0==i.length&&(i=e.data);var s=0;for(s=0;s<i[0].length;s++)s<n[0].length?thead+="<th>"+n[0][s]+"</th>":thead+="<th>COLUMN"+(s+1)+"</th>";thead+="</tr>";for(var r=1;r<n.length;r++){for(rows+="<tr>",s=0;s<i[0].length;s++)s<n[r].length?rows+="<td>"+n[r][s]+"</td>":rows+="<td>&nbsp</td>";rows+="</tr>"}return htmlOutput("<table border=1><thead>\n"+thead+"</thead><tbody>\n"+rows+"</tbody></table>",ext),old}openErrorDialog("Sorry Input is Empty")}$(function(){postInitEditors()});var cssInputeditor,cssOutputEditor,editorOutput,demoCSS,last_action="beautify",fullscreenEditor="";function createCSSEditor(){if(0!=$("#inputeditor").length){var t=$("#viewname").val().split("-");(cssInputeditor=ace.edit("inputeditor")).getSession().setMode("ace/mode/"+t[0]),cssInputeditor.getSession().setUseWrapMode(!0),cssInputeditor.setOptions({fontSize:"10pt"}),addCSSInputIconstoEditor(),cssInputeditor.on("change",function(){saveToLocalStorage(cssInputeditor.getValue())}),cssInputeditor.setValue(getFromLocalStorage()),(cssOutputEditor=ace.edit("outputeditor")).getSession().setMode("ace/mode/"+t[2]),cssOutputEditor.getSession().setUseWrapMode(!0),cssOutputEditor.setOptions({fontSize:"10pt"}),addCSSOutputIconstoEditor()}}function setDataInInputEditor(t){cssInputeditor.setValue(t)}function addCSSInputIconstoEditor(){var t=$(".rightmenu");$(t).replaceWith('<div class="btn-group btn-group-sm right"><div id="fileopen" class="cursor-pointer btn-sm fa fa-folder-open" title="Open File" ></div><div class="cursor-pointer btn-sm fa fa-floppy-o" title="Save online" onclick="Action_Save();"></div><div class="cursor-pointer btn-sm fa fa-print" title="Print CSS" onclick="printCSS();"></div><div class="cursor-pointer btn-sm fa fa-times" title="Clear" onclick="clearCSSEditor(\'inputcsseditor\')"></div><div id="inputcopy" title="Copy to Clipboard" class="cursor-pointer btn-sm btn-shrink fa fa-files-o"></div><div id="inputFullScreen" title="fullscreen" onclick="addOverlay(\'input\');" class="cursor-pointer btn-sm btn-fullscreen fa fa-arrows-alt"></div><div id="inputCloseScreen" title="Close" onclick="removeOverlay(\'input\');" style="display:none" class="cursor-pointer btn-sm btn-fullscreen fa fa-window-close"></div></div>'),$(t).show(),$("#inputcopy").click(function(){copyToClipboard(cssInputeditor.getValue())}),cssInputeditor.focus()}function addCSSOutputIconstoEditor(t){var e=$(".outputrightmenu");$(e).after('<div id="outputToolBar" class="btn-group btn-group-sm right"><div class="cursor-pointer btn-sm fa fa-times" title="Clear" onclick="clearCSSEditor()"></div><div class="cursor-pointer btn-sm fa fa-download" title="Download" onclick="downloadinCSSTool();"></div><div id="outputcopy" title="Copy to Clipboard" class="cursor-pointer btn-sm btn-shrink fa fa-files-o"></div><div id="outputFullScreen" title="fullscreen" onclick="addOverlay(\'output\');" class="cursor-pointer btn-sm btn-fullscreen fa fa-arrows-alt"></div><div id="outputCloseScreen" title="Close" onclick="removeOverlay(\'output\');" style="display:none" class="cursor-pointer btn-sm btn-fullscreen fa fa-window-close"></div></div>'),t?$(e).show():$(e).hide(),$("#outputcopy").click(function(){copyToClipboard(cssOutputEditor.getValue())})}function downloadinCSSTool(){var t=cssOutputEditor.getValue();if(0!=t.trim().length){var e=new Blob([""+t],{type:"text/plain;charset=utf-8"});filename="data.css",saveAs(e,filename)}else setMessage("error","Sorry Result is Empty")}function clearCSSEditor(t){"inputcsseditor"==t?cssInputeditor.setValue(""):("all"==t&&cssInputeditor.setValue(""),cssOutputEditor.setValue(""))}function printCSS(){hideMessage();var t=$("<div>").text(cssInputeditor.getValue()).html();localStorage.setItem("data",t),$("<iframe>").attr("src","/cssprint").appendTo("body")}function plainCSS(){hideMessage(),localStorage.setItem("data",cssOutputEditor.getValue()),window.open("/cssview","_blank").focus()}function lessTocss(){var t=cssInputeditor.getValue();$.ajax({type:"post",url:"/service/lessTocss",dataType:"text",data:{css:t},success:function(t){null!=t&&null!=t&&0!=t.trim().length&&cssOutputEditor.setValue(vkbeautify.css(t))},error:function(t,e,n){setMessage("error",e)}})}function scssTocss(){var t=cssInputeditor.getValue();$.ajax({type:"post",url:"/service/scssTocss",dataType:"text",data:{css:t},success:function(t){null!=t&&null!=t&&0!=t.trim().length&&cssOutputEditor.setValue(vkbeautify.css(t))},error:function(t,e,n){setMessage("error",e)}})}function cssToless(){var t=cssInputeditor.getValue();$.ajax({type:"post",url:"/service/cssToless",dataType:"text",data:{css:t},success:function(t){null!=t&&null!=t&&0!=t.trim().length&&cssOutputEditor.setValue(t)},error:function(t,e,n){setMessage("error",e)}})}function stylusTocss(){var t=cssInputeditor.getValue();stylus(t).render(function(t,e){null!=t?cssOutputEditor.setValue("Stylus parsing error!"):cssOutputEditor.setValue(vkbeautify.css(e))})}function log(t){console&&console.log(t)}function tr(t){return $.trim(t.replace(/\t+/," "))}var openingBracket,closingBracket,semiColumn,eol,indentS="\t";function convertCssTo(t){"less"==t?(eol=";",openingBracket="{",closingBracket="}",semiColumn=":"):"sass"==t?(eol=" ",closingBracket=openingBracket="",semiColumn=":"):"stylus"==t&&(semiColumn=closingBracket=openingBracket=eol=""),cssOutputEditor.setValue(parseCSS(cssInputeditor.getValue()))}function parseCSS(t){var a={children:{}};return(t=t.replace(/\/\*[\s\S]*?\*\//gm,"")).replace(/([^{]+)\{([^}]+)\}/g,function(t,e,n){var i={};i.source=t,i.selector=tr(e);var s=a;if(-1<i.selector.indexOf(",")){var r=i.selector;s.children[r]||(s.children[r]={children:{},declarations:[]}),s=s.children[r]}else{i.selector=i.selector.replace(/\s*([>\+~])\s*/g," &$1"),i.selector=i.selector.replace(/(\w)([:\.])/g,"$1 &$2"),i.selectorParts=i.selector.split(/[\s]+/);for(var o=0;o<i.selectorParts.length;o++){r=(r=(r=i.selectorParts[o]).replace(/&(.)/g,"& $1 ")).replace(/& ([:\.]) /g,"&$1"),s.children[r]||(s.children[r]={children:{},declarations:[]}),s=s.children[r]}}n.replace(/([^:;]+):([^;]+)/g,function(t,e,n){var i={source:t,property:tr(e),value:tr(n)};s.declarations.push(i)})}),exportObject(a)}var depth=0,s="";function exportObject(t){var s="";return $.each(t.children,function(t,e){s+=getIndent()+t+" "+openingBracket+"\n",depth++;for(var n=0;n<e.declarations.length;n++){var i=e.declarations[n];s+=getIndent()+i.property+semiColumn+" "+i.value+eol+"\n"}s+=exportObject(e),depth--,s+=getIndent()+closingBracket+"\n"}),s=s.replace(/^\s*$[\n\r]{1,}/gm,"")}function getIndent(){for(var t="",e=0;e<depth;e++)t+=indentS;return t}function loadCSSSampleData(){var t=$("#viewname").val().split("-"),e="";"css"==(t=t[0])?e="   .menu_simple {     width: 100%;background-color: #005555;}     .menu_simple ul {margin: 0;padding: 0;float: left;}     .menu_simple ul li {     display: inline;     }     .menu_simple ul li a {float: left;text-decoration: none;color: white;padding: 10.5px 11px;background-color: #005555;}     .menu_simple ul li a:visited {color: white;}    .menu_simple ul li a:hover, .menu_simple ul li .current {color: white;background-color: #5FD367;}  ":"less"==t?e="   @color-base: #2d5e8b;     .class1 {         background-color: @color-base;         .class2 {             background-color: #fff;             color: @color-base;         }    }  ":"scss"==t||"sass"==t?e="   $font-stack: Helvetica, sans-serif;     $primary-color: #333;          body {       font: 100% $font-stack;       color: $primary-color;    }  ":"stylus"==t&&(e="   body {       font: 14px/1.5 Helvetica, arial, sans-serif;       #logo {         border-radius: 5px;       }    }  "),cssInputeditor.setValue(vkbeautify.css(e)),defaultAction()}void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var t=/function\s([^(]{1,})\(/.exec(this.toString());return t&&1<t.length?t[1].trim():""}}),void 0===String.prototype.trimRight&&(String.prototype.trimRight=function(){return String(this).replace(/\s+$/,"")});var stylus=function(){function o(t){var e=o.resolve(t),n=o.modules[e];if(!n)throw new Error('failed to require "'+t+'"');return n.exports||(n.exports={},n.call(n.exports,n,n.exports,o.relative(e))),n.exports}var r="called-from = ()\n\nvendors = moz webkit o ms official\n\n// stringify the given arg\n\n-string(arg)\n  type(arg) + ' ' + arg\n\n// require a color\n\nrequire-color(color)\n  unless color is a 'color'\n    error('RGB or HSL value expected, got a ' + -string(color))\n\n// require a unit\n\nrequire-unit(n)\n  unless n is a 'unit'\n    error('unit expected, got a ' + -string(n))\n\n// require a string\n\nrequire-string(str)\n  unless str is a 'string' or str is a 'ident'\n    error('string expected, got a ' + -string(str))\n\n// Math functions\n\nabs(n) { math(n, 'abs') }\nmin(a, b) { a < b ? a : b }\nmax(a, b) { a > b ? a : b }\n\n// Trigonometrics\nPI = -math-prop('PI')\n\nradians-to-degrees(angle)\n  angle * (180 / PI)\n\ndegrees-to-radians(angle)\n  unit(angle * (PI / 180),'')\n\nsin(n)\n  n = degrees-to-radians(n) if unit(n) == 'deg'\n  round(math(n, 'sin'), 9)\n\ncos(n)\n  n = degrees-to-radians(n) if unit(n) == 'deg'\n  round(math(n, 'cos'), 9)\n\n// Rounding Math functions\n\nceil(n, precision = 0)\n  multiplier = 10 ** precision\n  math(n * multiplier, 'ceil') / multiplier\n\nfloor(n, precision = 0)\n  multiplier = 10 ** precision\n  math(n * multiplier, 'floor') / multiplier\n\nround(n, precision = 0)\n  multiplier = 10 ** precision\n  math(n * multiplier, 'round') / multiplier\n\n// return the sum of the given numbers\n\nsum(nums)\n  sum = 0\n  sum += n for n in nums\n\n// return the average of the given numbers\n\navg(nums)\n  sum(nums) / length(nums)\n\n// return a unitless number, or pass through\n\nremove-unit(n)\n  if typeof(n) is 'unit'\n    unit(n, '')\n  else\n    n\n\n// convert a percent to a decimal, or pass through\n\npercent-to-decimal(n)\n  if unit(n) is '%'\n    remove-unit(n) / 100\n  else\n    n\n\n// check if n is an odd number\n\nodd(n)\n  1 == n % 2\n\n// check if n is an even number\n\neven(n)\n  0 == n % 2\n\n// check if color is light\n\nlight(color)\n  lightness(color) >= 50%\n\n// check if color is dark\n\ndark(color)\n  lightness(color) < 50%\n\n// desaturate color by amount\n\ndesaturate(color, amount)\n  adjust(color, 'saturation', - amount)\n\n// saturate color by amount\n\nsaturate(color = '', amount = 100%)\n  if color is a 'color'\n    adjust(color, 'saturation', amount)\n  else\n    unquote( 'saturate(' + color + ')' )\n\n// darken by the given amount\n\ndarken(color, amount)\n  adjust(color, 'lightness', - amount)\n\n// lighten by the given amount\n\nlighten(color, amount)\n  adjust(color, 'lightness', amount)\n\n// decrease opacity by amount\n\nfade-out(color, amount)\n  color - rgba(black, percent-to-decimal(amount))\n\n// increase opacity by amount\n\nfade-in(color, amount)\n  color + rgba(black, percent-to-decimal(amount))\n\n// spin hue by a given amount\n\nspin(color, amount)\n  color + unit(amount, deg)\n\n// mix two colors by a given amount\n\nmix(color1, color2, weight = 50%)\n  unless weight in 0..100\n    error('Weight must be between 0% and 100%')\n\n  if length(color1) == 2\n    weight = color1[0]\n    color1 = color1[1]\n\n  else if length(color2) == 2\n    weight = 100 - color2[0]\n    color2 = color2[1]\n\n  require-color(color1)\n  require-color(color2)\n\n  p = unit(weight / 100, '')\n  w = p * 2 - 1\n\n  a = alpha(color1) - alpha(color2)\n\n  w1 = (((w * a == -1) ? w : (w + a) / (1 + w * a)) + 1) / 2\n  w2 = 1 - w1\n\n  channels = (red(color1) red(color2)) (green(color1) green(color2)) (blue(color1) blue(color2))\n  rgb = ()\n\n  for pair in channels\n    push(rgb, floor(pair[0] * w1 + pair[1] * w2))\n\n  a1 = alpha(color1) * p\n  a2 = alpha(color2) * (1 - p)\n  alpha = a1 + a2\n\n  rgba(rgb[0], rgb[1], rgb[2], alpha)\n\n// invert colors, leave alpha intact\n\ninvert(color = '')\n  if color is a 'color'\n    rgba(#fff - color, alpha(color))\n  else\n    unquote( 'invert(' + color + ')' )\n\n// give complement of the given color\n\ncomplement( color )\n  spin( color, 180 )\n\n// give grayscale of the given color\n\ngrayscale( color = '' )\n  if color is a 'color'\n    desaturate( color, 100% )\n  else\n    unquote( 'grayscale(' + color + ')' )\n\n// mix the given color with white\n\ntint( color, percent )\n  mix( white, color, percent )\n\n// mix the given color with black\n\nshade( color, percent )\n  mix( black, color, percent )\n\n// return the last value in the given expr\n\nlast(expr)\n  expr[length(expr) - 1]\n\n// return keys in the given pairs or object\n\nkeys(pairs)\n  ret = ()\n  if type(pairs) == 'object'\n    for key in pairs\n      push(ret, key)\n  else\n    for pair in pairs\n      push(ret, pair[0]);\n  ret\n\n// return values in the given pairs or object\n\nvalues(pairs)\n  ret = ()\n  if type(pairs) == 'object'\n    for key, val in pairs\n      push(ret, val)\n  else\n    for pair in pairs\n      push(ret, pair[1]);\n  ret\n\n// join values with the given delimiter\n\njoin(delim, vals...)\n  buf = ''\n  vals = vals[0] if length(vals) == 1\n  for val, i in vals\n    buf += i ? delim + val : val\n\n// add a CSS rule to the containing block\n\n// - This definition allows add-property to be used as a mixin\n// - It has the same effect as interpolation but allows users\n//   to opt for a functional style\n\nadd-property-function = add-property\nadd-property(name, expr)\n  if mixin\n    {name} expr\n  else\n    add-property-function(name, expr)\n\nprefix-classes(prefix)\n  -prefix-classes(prefix, block)\n\n// Caching mixin, use inside your functions to enable caching by extending.\n\n$stylus_mixin_cache = {}\ncache()\n  $key = (current-media() or 'no-media') + '__' + called-from[0] + '__' + arguments\n  if $key in $stylus_mixin_cache\n    @extend {'$cache_placeholder_for_' + $stylus_mixin_cache[$key]}\n  else if 'cache' in called-from\n    {block}\n  else\n    $id = length($stylus_mixin_cache)\n\n    &,\n    /$cache_placeholder_for_{$id}\n      $stylus_mixin_cache[$key] = $id\n      {block}\n";return o.modules={},o.resolve=function(t){var e=t,n=t+".js",i=t+"/index.js";return o.modules[n]&&n||o.modules[i]&&i||e},o.register=function(t,e){o.modules[t]=e},o.relative=function(r){return function(t){if("."!=t[0])return o(t);var e=r.split("/"),n=t.split("/");e.pop();for(var i=0;i<n.length;i++){var s=n[i];".."==s?e.pop():"."!=s&&e.push(s)}return o(e.join("/"))}},o.register("path.js",function(t,c,e){var i=/^([\s\S]+\/(?!$)|\/)?((?:[\s\S]+?)?(\.[^.]*)?)$/;c.normalize=function(t){var e="/"===t.charAt(0),n="/"===t.slice(-1);return(t=function(t,e){for(var n=0,i=t.length-1;0<=i;i--){var s=t[i];"."==s?t.splice(i,1):".."===s?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}(t.split("/").filter(function(t){return!!t}),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},c.join=function(){var t=Array.prototype.slice.call(arguments,0);return c.normalize(t.filter(function(t,e){return t&&"string"==typeof t}).join("/"))},c.relative=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;0<=n&&""===t[n];n--);return n<e?[]:t.slice(e,n-e+1)}t=c.resolve(t).substr(1),e=c.resolve(e).substr(1);for(var i=n(t.split("/")),s=n(e.split("/")),r=Math.min(i.length,s.length),o=r,a=0;a<r;a++)if(i[a]!==s[a]){o=a;break}var l=[];for(a=o;a<i.length;a++)l.push("..");return(l=l.concat(s.slice(o))).join("/")},c.dirname=function(t){var e=i.exec(t)[1]||"";return e?1===e.length?e:e.substring(0,e.length-1):"."},c.basename=function(t,e){var n=i.exec(t)[2]||"";return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},c.extname=function(t){return i.exec(t)[3]||""}}),o.register("colors.js",function(t,e,n){t.exports={aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],transparent:[0,0,0,0],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1],rebeccapurple:[102,51,153,1]}}),o.register("errors.js",function(t,e,n){function i(t){this.name="ParseError",this.message=t,Error.captureStackTrace(this,i)}function s(t){this.name="SyntaxError",this.message=t,Error.captureStackTrace(this,i)}e.ParseError=i,(e.SyntaxError=s).prototype.__proto__=Error.prototype,i.prototype.__proto__=Error.prototype,s.prototype.__proto__=Error.prototype}),o.register("units.js",function(t,e,n){t.exports=["em","ex","ch","rem","vw","vh","vmin","vmax","cm","mm","in","pt","pc","px","deg","grad","rad","turn","s","ms","Hz","kHz","dpi","dpcm","dppx","x","%","fr"]}),o.register("functions/index.js",function(t,e,n){e["add-property"]=n("./add-property"),e.adjust=n("./adjust"),e.alpha=n("./alpha"),e["base-convert"]=n("./base-convert"),e.basename=n("./basename"),e.blend=n("./blend"),e.blue=n("./blue"),e.clone=n("./clone"),e.component=n("./component"),e.contrast=n("./contrast"),e.convert=n("./convert"),e["current-media"]=n("./current-media"),e.define=n("./define"),e.dirname=n("./dirname"),e.error=n("./error"),e.extname=n("./extname"),e.green=n("./green"),e.hsl=n("./hsl"),e.hsla=n("./hsla"),e.hue=n("./hue"),e.length=n("./length"),e.lightness=n("./lightness"),e["list-separator"]=n("./list-separator"),e.lookup=n("./lookup"),e.luminosity=n("./luminosity"),e.match=n("./match"),e.math=n("./math"),e.merge=e.extend=n("./merge"),e.operate=n("./operate"),e["opposite-position"]=n("./opposite-position"),e.p=n("./p"),e.pathjoin=n("./pathjoin"),e.pop=n("./pop"),e.push=e.append=n("./push"),e.range=n("./range"),e.red=n("./red"),e.remove=n("./remove"),e.replace=n("./replace"),e.rgb=n("./rgb"),e.rgba=n("./rgba"),e.s=n("./s"),e.saturation=n("./saturation"),e["selector-exists"]=n("./selector-exists"),e.selector=n("./selector"),e.selectors=n("./selectors"),e.shift=n("./shift"),e.split=n("./split"),e.substr=n("./substr"),e.tan=n("./tan"),e.trace=n("./trace"),e.transparentify=n("./transparentify"),e.type=e.typeof=e["type-of"]=n("./type"),e.unit=n("./unit"),e.unquote=n("./unquote"),e.unshift=e.prepend=n("./unshift"),e.warn=n("./warn"),e["-math-prop"]=n("./math-prop"),e["-prefix-classes"]=n("./prefix-classes")}),o.register("functions/url.js",function(t,e,n){var h=n("../visitor/compiler"),f=n("../renderer").events,d=n("../nodes"),m=n("../path").extname,v=n("../utils"),i={".gif":"image/gif",".png":"image/png",".jpg":"image/jpeg",".jpeg":"image/jpeg",".svg":"image/svg+xml",".webp":"image/webp",".ttf":"application/x-font-ttf",".eot":"application/vnd.ms-fontobject",".woff":"application/font-woff",".woff2":"application/font-woff2"};t.exports=function(t){var c=(t=t||{}).paths||[],p=null!=t.limit?t.limit:3e4,u=t.mimes||i;function e(t){var e=new h(t);e.isURL=!0,t=t.nodes.map(function(t){return e.visit(t)}).join(""),t=parse(t);var n,i=m(t.pathname),s=u[i],r=t.hash||"",o=new d.Literal('url("'+t.href+'")'),a=c.concat(this.paths);if(!s)return o;if(t.protocol)return o;var l=v.lookup(t.pathname,a);return l?(n=fs.readFileSync(l),!1!==p&&n.length>p?o:new d.Literal('url("data:'+s+";base64,"+n.toString("base64")+r+'")')):(f.emit("file not found","File "+o+" could not be found, literal url retained!"),o)}return e.raw=!0,e},t.exports.mimes=i}),o.register("functions/add-property.js",function(t,e,n){var a=n("../utils"),l=n("../nodes");(t.exports=function(t,e){a.assertType(t,"expression","name"),t=a.unwrap(t).first,a.assertString(t,"name"),a.assertType(e,"expression","expr");var n=new l.Property([t],e),i=this.closestBlock,s=i.nodes.length,r=i.nodes.slice(0,i.index),o=i.nodes.slice(i.index++,s);return r.push(n),i.nodes=r.concat(o),n}).raw=!0}),o.register("functions/adjust.js",function(t,e,n){var r=n("../utils");t.exports=function(t,e,n){r.assertColor(t,"color"),r.assertString(e,"prop"),r.assertType(n,"unit","amount");var i=t.hsla.clone();if(!(e={hue:"h",saturation:"s",lightness:"l"}[e.string]))throw new Error("invalid adjustment property");var s=n.val;return"%"==n.type&&(s="l"==e&&0<s?(100-i[e])*s/100:i[e]*(s/100)),i[e]+=s,i.rgba}}),o.register("functions/alpha.js",function(t,e,n){var i=n("../nodes"),s=n("./rgba");t.exports=function(t,e){return t=t.rgba,e?s(new i.Unit(t.r),new i.Unit(t.g),new i.Unit(t.b),e):new i.Unit(t.a,"")}}),o.register("functions/base-convert.js",function(t,e,n){var s=n("../utils"),r=n("../nodes");(t.exports=function(t,e,n){s.assertPresent(t,"number"),s.assertPresent(e,"base"),t=s.unwrap(t).nodes[0].val,e=s.unwrap(e).nodes[0].val,n=n&&s.unwrap(n).nodes[0].val||2;for(var i=Number(t).toString(e);i.length<n;)i="0"+i;return new r.Literal(i)}).raw=!0}),o.register("functions/basename.js",function(t,e,n){var i=n("../utils"),s=n("../path");t.exports=function(t,e){return i.assertString(t,"path"),s.basename(t.val,e&&e.val)}}),o.register("functions/blend.js",function(t,e,n){var i=n("../utils"),s=n("../nodes");t.exports=function(t,e){return i.assertColor(t),t=t.rgba,e=e||new s.RGBA(255,255,255,1),i.assertColor(e),e=e.rgba,new s.RGBA(t.r*t.a+e.r*(1-t.a),t.g*t.a+e.g*(1-t.a),t.b*t.a+e.b*(1-t.a),t.a+e.a-t.a*e.a)}}),o.register("functions/blue.js",function(t,e,n){var i=n("../nodes"),s=n("./rgba");t.exports=function(t,e){return t=t.rgba,e?s(new i.Unit(t.r),new i.Unit(t.g),e,new i.Unit(t.a)):new i.Unit(t.b,"")}}),o.register("functions/clone.js",function(t,e,n){var i=n("../utils");(t.exports=function(t){return i.assertPresent(t,"expr"),t.clone()}).raw=!0}),o.register("functions/component.js",function(t,e,n){var s=n("../utils"),r=n("../nodes"),o={red:"r",green:"g",blue:"b",alpha:"a",hue:"h",saturation:"s",lightness:"l"},a={hue:"deg",saturation:"%",lightness:"%"},l={red:"rgba",blue:"rgba",green:"rgba",alpha:"rgba",hue:"hsla",saturation:"hsla",lightness:"hsla"};t.exports=function(t,e){s.assertColor(t,"color"),s.assertString(e,"name");e=e.string;var n=a[e],i=l[e];if(!(e=o[e]))throw new Error('invalid color component "'+e+'"');return new r.Unit(t[i][e],n)}}),o.register("functions/contrast.js",function(t,e,n){var u=n("../utils"),h=n("../nodes"),f=n("./blend"),d=n("./luminosity");t.exports=function(t,n){if("rgba"!=t.nodeName&&"hsla"!=t.nodeName)return new h.Literal("contrast("+(t.isNull?"":t.toString())+")");var e=new h.Object;function i(t,e){t.a<1&&(t=f(t,e));var n=d(e).val+.05,i=d(t).val+.05,s=n/i;return n<i&&(s=1/s),Math.round(10*s)/10}if(t=t.rgba,n=n||new h.RGBA(255,255,255,1),u.assertColor(n),1<=(n=n.rgba).a){var s=new h.Unit(i(t,n));e.set("ratio",s),e.set("error",new h.Unit(0)),e.set("min",s),e.set("max",s)}else{var r=i(t,f(n,new h.RGBA(0,0,0,1))),o=i(t,f(n,new h.RGBA(255,255,255,1))),a=Math.max(r,o);function l(t,e){return Math.min(Math.max(0,(t-e*n.a)/(1-n.a)),255)}var c=new h.RGBA(l(t.r,n.r),l(t.g,n.g),l(t.b,n.b),1),p=i(t,f(n,c));e.set("ratio",new h.Unit(Math.round(50*(p+a))/100)),e.set("error",new h.Unit(Math.round(50*(a-p))/100)),e.set("min",new h.Unit(p)),e.set("max",new h.Unit(a))}return e}}),o.register("functions/convert.js",function(t,e,n){var i=n("../utils");t.exports=function(t){return i.assertString(t,"str"),i.parseString(t.string)}}),o.register("functions/current-media.js",function(t,e,n){var i=n("../nodes");t.exports=function(){return new i.String(function t(e){{if("media"==e.nodeName)return e.toString();if(e.block.parent.node)return t(e.block.parent.node)}}(this.closestBlock.node)||"")}}),o.register("functions/define.js",function(t,e,n){var s=n("../utils"),r=n("../nodes");t.exports=function(t,e){s.assertType(t,"string","name"),e=s.unwrap(e);var n=this.currentScope,i=new r.Ident(t.val,e);return n.add(i),r.nil}}),o.register("functions/dirname.js",function(t,e,n){var i=n("../utils"),s=n("../path");t.exports=function(t){return i.assertString(t,"path"),s.dirname(t.val).replace(/\\/g,"/")}}),o.register("functions/error.js",function(t,e,n){var i=n("../utils");t.exports=function(t){i.assertType(t,"string","msg");var e=new Error(t.val);throw e.fromStylus=!0,e}}),o.register("functions/extname.js",function(t,e,n){var i=n("../utils"),s=n("../path");t.exports=function(t){return i.assertString(t,"path"),s.extname(t.val)}}),o.register("functions/green.js",function(t,e,n){var i=n("../nodes"),s=n("./rgba");t.exports=function(t,e){return t=t.rgba,e?s(new i.Unit(t.r),e,new i.Unit(t.b),new i.Unit(t.a)):new i.Unit(t.g,"")}}),o.register("functions/hsl.js",function(t,e,n){var i=n("../utils"),s=n("../nodes"),r=n("./hsla");t.exports=function(t,e,n){return 1==arguments.length?(i.assertColor(t,"color"),t.hsla):r(t,e,n,new s.Unit(1))}}),o.register("functions/hsla.js",function(t,e,n){var r=n("../utils"),o=n("../nodes");t.exports=function(t,e,n,i){switch(arguments.length){case 1:return r.assertColor(t),t.hsla;case 2:r.assertColor(t);var s=t.hsla;return r.assertType(e,"unit","alpha"),"%"==(i=e.clone()).type&&(i.val/=100),new o.HSLA(s.h,s.s,s.l,i.val);default:return r.assertType(t,"unit","hue"),r.assertType(e,"unit","saturation"),r.assertType(n,"unit","lightness"),r.assertType(i,"unit","alpha"),(i=i.clone())&&"%"==i.type&&(i.val/=100),new o.HSLA(t.val,e.val,n.val,i.val)}}}),o.register("functions/hue.js",function(t,e,n){var i=n("../nodes"),s=n("./hsla"),r=n("./component");t.exports=function(t,e){if(e){var n=t.hsla;return s(e,new i.Unit(n.s),new i.Unit(n.l),new i.Unit(n.a))}return r(t,new i.String("hue"))}}),o.register("functions/length.js",function(t,e,n){var i=n("../utils");(t.exports=function(t){if(t){if(t.nodes){var e=i.unwrap(t).nodes;return 1==e.length&&"object"==e[0].nodeName?e[0].length:e.length}return 1}return 0}).raw=!0}),o.register("functions/lightness.js",function(t,e,n){var i=n("../nodes"),s=n("./hsla"),r=n("./component");t.exports=function(t,e){if(e){var n=t.hsla;return s(new i.Unit(n.h),new i.Unit(n.s),e,new i.Unit(n.a))}return r(t,new i.String("lightness"))}}),o.register("functions/list-separator.js",function(t,e,n){var i=n("../utils"),s=n("../nodes");(t.exports=function(t){return t=i.unwrap(t),new s.String(t.isList?",":" ")}).raw=!0}),o.register("functions/lookup.js",function(t,e,n){var i=n("../utils"),s=n("../nodes");t.exports=function(t){i.assertType(t,"string","name");var e=this.lookup(t.val);return e?this.visit(e):s.nil}}),o.register("functions/luminosity.js",function(t,e,n){var i=n("../utils"),s=n("../nodes");t.exports=function(t){function e(t){return(t/=255)<.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}return i.assertColor(t),t=t.rgba,new s.Unit(.2126*e(t.r)+.7152*e(t.g)+.0722*e(t.b))}}),o.register("functions/match.js",function(t,e,n){var i=n("../utils"),s=n("../nodes");t.exports=function(t,e){i.assertType(t,"string","pattern"),i.assertString(e,"val");var n=new RegExp(t.val);return new s.Boolean(n.test(e.string))}}),o.register("functions/math-prop.js",function(t,e,n){var i=n("../nodes");t.exports=function(t){return new i.Unit(Math[t.string])}}),o.register("functions/math.js",function(t,e,n){var i=n("../utils"),s=n("../nodes");t.exports=function(t,e){return i.assertType(t,"unit","n"),i.assertString(e,"fn"),new s.Unit(Math[e.string](t.val),t.type)}}),o.register("functions/merge.js",function(t,e,n){var s=n("../utils");(t.exports=function(t){s.assertPresent(t,"dest"),t=s.unwrap(t).first,s.assertType(t,"object","dest");for(var e=!0===s.unwrap(arguments[arguments.length-1]).first.val,n=1,i=arguments.length-e;n<i;++n)s.merge(t.vals,s.unwrap(arguments[n]).first.vals,e);return t}).raw=!0}),o.register("functions/operate.js",function(t,e,n){var i=n("../utils");t.exports=function(t,e,n){return i.assertType(t,"string","op"),i.assertPresent(e,"left"),i.assertPresent(n,"right"),e.operate(t.val,n)}}),o.register("functions/opposite-position.js",function(t,e,n){var i=n("../utils"),s=n("../nodes");(t.exports=function(t){var n=[];return i.unwrap(t).nodes.forEach(function(t,e){i.assertString(t,"position "+e),t=function(){switch(t.string){case"top":return"bottom";case"bottom":return"top";case"left":return"right";case"right":return"left";case"center":return"center";default:throw new Error("invalid position "+t)}}(),n.push(new s.Literal(t))}),n}).raw=!0}),o.register("functions/p.js",function(t,e,n){var i=n("../utils"),s=n("../nodes");(t.exports=function(){return[].slice.call(arguments).forEach(function(t){(t=i.unwrap(t)).nodes.length&&console.log("[90minspect:[0m %s",t.toString().replace(/^\(|\)$/g,""))}),s.nil}).raw=!0}),o.register("functions/pathjoin.js",function(t,e,n){var i=n("../path");(t.exports=function(){var t=[].slice.call(arguments).map(function(t){return t.first.string});return i.join.apply(null,t).replace(/\\/g,"/")}).raw=!0}),o.register("functions/pop.js",function(t,e,n){var i=n("../utils");(t.exports=function(t){return(t=i.unwrap(t)).nodes.pop()}).raw=!0}),o.register("functions/prefix-classes.js",function(t,e,n){var i=n("../utils");t.exports=function(t,e){i.assertString(t,"prefix"),i.assertType(e,"block","block");var n=this.prefix;return this.options.prefix=this.prefix=t.string,e=this.visit(e),this.options.prefix=this.prefix=n,e}}),o.register("functions/push.js",function(t,e,n){var i=n("../utils");(t.exports=function(t){t=i.unwrap(t);for(var e=1,n=arguments.length;e<n;++e)t.nodes.push(i.unwrap(arguments[e]).clone());return t.nodes.length}).raw=!0}),o.register("functions/range.js",function(t,e,n){var r=n("../utils"),o=n("../nodes");t.exports=function(t,e,n){if(r.assertType(t,"unit","start"),r.assertType(e,"unit","stop"),n){if(r.assertType(n,"unit","step"),0==n.val)throw new Error('ArgumentError: "step" argument must not be zero')}else n=new o.Unit(1);for(var i=new o.Expression,s=t.val;s<=e.val;s+=n.val)i.push(new o.Unit(s,t.type));return i}}),o.register("functions/red.js",function(t,e,n){var i=n("../nodes"),s=n("./rgba");t.exports=function(t,e){return t=t.rgba,e?s(e,new i.Unit(t.g),new i.Unit(t.b),new i.Unit(t.a)):new i.Unit(t.r,"")}}),o.register("functions/remove.js",function(t,e,n){var i=n("../utils");t.exports=function(t,e){return i.assertType(t,"object","object"),i.assertString(e,"key"),delete t.vals[e.string],t}}),o.register("functions/replace.js",function(t,e,n){var s=n("../utils"),r=n("../nodes");t.exports=function(t,e,n){s.assertString(t,"pattern"),s.assertString(e,"replacement"),s.assertString(n,"val"),t=new RegExp(t.string,"g");var i=n.string.replace(t,e.string);return n instanceof r.Ident?new r.Ident(i):new r.String(i)}}),o.register("functions/rgb.js",function(t,e,n){var s=n("../utils"),r=n("../nodes"),o=n("./rgba");t.exports=function(t,e,n){switch(arguments.length){case 1:s.assertColor(t);var i=t.rgba;return new r.RGBA(i.r,i.g,i.b,1);default:return o(t,e,n,new r.Unit(1))}}}),o.register("functions/rgba.js",function(t,e,n){var l=n("../utils"),c=n("../nodes");t.exports=function(t,e,n,i){switch(arguments.length){case 1:return l.assertColor(t),t.rgba;case 2:l.assertColor(t);var s=t.rgba;return l.assertType(e,"unit","alpha"),"%"==(i=e.clone()).type&&(i.val/=100),new c.RGBA(s.r,s.g,s.b,i.val);default:l.assertType(t,"unit","red"),l.assertType(e,"unit","green"),l.assertType(n,"unit","blue"),l.assertType(i,"unit","alpha");var r="%"==t.type?Math.round(2.55*t.val):t.val,o="%"==e.type?Math.round(2.55*e.val):e.val,a="%"==n.type?Math.round(2.55*n.val):n.val;return(i=i.clone())&&"%"==i.type&&(i.val/=100),new c.RGBA(r,o,a,i.val)}}}),o.register("functions/s.js",function(t,e,n){var o=n("../utils"),a=n("../nodes"),l=n("../visitor/compiler");(t.exports=function(t){t=o.unwrap(t).nodes[0],o.assertString(t);var i=this,e=t.string,s=arguments,r=1;return e=e.replace(/%(s|d)/g,function(t,e){var n=s[r++]||a.nil;switch(e){case"s":return new l(n,i.options).compile();case"d":if("unit"!=(n=o.unwrap(n).first).nodeName)throw new Error("%d requires a unit");return n.val}}),new a.Literal(e)}).raw=!0}),o.register("functions/saturation.js",function(t,e,n){var i=n("../nodes"),s=n("./hsla"),r=n("./component");t.exports=function(t,e){if(e){var n=t.hsla;return s(new i.Unit(n.h),e,new i.Unit(n.l),new i.Unit(n.a))}return r(t,new i.String("saturation"))}}),o.register("functions/selector-exists.js",function(t,e,n){var i=n("../utils");t.exports=function(t){if(i.assertString(t,"selector"),!this.__selectorsMap__){var e=new(n("../visitor/normalizer"))(this.root.clone());e.visit(e.root),this.__selectorsMap__=e.map}return t.string in this.__selectorsMap__}}),o.register("functions/selector.js",function(t,e,o){var a=o("../utils");function l(t,e){t.forEach(function(t){t=t.first,a.assertString(t,"selector"),e.push(c(t.string))})}function c(t){var e,n=new new o("../parser")(t);return n.state.push("selector-parts"),(e=n.selector()).forEach(function(t){t.val=t.segments.map(function(t){return t.toString()}).join("")}),e}(t.exports=function(){var t=this.selectorStack,e=[].slice.call(arguments);if(1==e.length){var n=a.unwrap(e[0]),i=n.nodes.length;if(1==i){a.assertString(n.first,"selector");var s=o("../selector-parser"),r=n.first.string;if(new s(r).parse().val==r)return r;t.push(c(r))}else 1<i&&(n.isList?l(n.nodes,t):t.push(c(n.nodes.map(function(t){return a.assertString(t,"selector"),t.string}).join(" "))))}else 1<e.length&&l(e,t);return t.length?a.compileSelectors(t).join(","):"&"}).raw=!0}),o.register("functions/selectors.js",function(t,e,n){var o=n("../nodes"),a=n("../selector-parser");t.exports=function(){var t=this.selectorStack,e=new o.Expression(!0);if(t.length)for(var n=0;n<t.length;n++){var i,s=t[n];if(1<s.length)e.push(new o.String(s.map(function(t){return((i=new a(t.val).parse().nested)&&n?"& ":"")+t.val}).join(",")));else{var r=s[0].val;i=new a(r).parse().nested,e.push(new o.String((i&&n?"& ":"")+r))}}else e.push(new o.String("&"));return e}}),o.register("functions/shift.js",function(t,e,n){var i=n("../utils");(t.exports=function(t){return(t=i.unwrap(t)).nodes.shift()}).raw=!0}),o.register("functions/split.js",function(t,e,n){var a=n("../utils"),l=n("../nodes");t.exports=function(t,e){a.assertString(t,"delimiter"),a.assertString(e,"val");for(var n=e.string.split(t.string),i=new l.Expression,s=e instanceof l.Ident?l.Ident:l.String,r=0,o=n.length;r<o;++r)i.nodes.push(new s(n[r]));return i}}),o.register("functions/substr.js",function(t,e,n){var s=n("../utils"),r=n("../nodes");t.exports=function(t,e,n){s.assertString(t,"val"),s.assertType(e,"unit","start"),n=n&&n.val;var i=t.string.substr(e.val,n);return t instanceof r.Ident?new r.Ident(i):new r.String(i)}}),o.register("functions/tan.js",function(t,e,n){var o=n("../utils"),a=n("../nodes");t.exports=function(t){o.assertType(t,"unit","angle");var e=t.val;"deg"===t.type&&(e*=Math.PI/180);var n=Math.pow(10,9),i=Math.round(Math.sin(e)*n)/n,s=Math.round(Math.cos(e)*n)/n,r=Math.round(n*i/s)/n;return new a.Unit(r,"")}}),o.register("functions/trace.js",function(t,e,n){var i=n("../nodes");t.exports=function(){return console.log(this.stack),i.nil}}),o.register("functions/transparentify.js",function(t,e,n){var r=n("../utils"),o=n("../nodes");t.exports=function(e,n,t){r.assertColor(e),e=e.rgba,n=n||new o.RGBA(255,255,255,1),t||!n||n.rgba||(t=n,n=new o.RGBA(255,255,255,1)),r.assertColor(n),n=n.rgba;var i=["r","g","b"].map(function(t){return(e[t]-n[t])/((0<e[t]-n[t]?255:0)-n[t])}).sort(function(t,e){return t<e})[0];function s(t){return 0==i?n[t]:n[t]+(e[t]-n[t])/i}return t&&(r.assertType(t,"unit","alpha"),"%"==t.type?i=t.val/100:t.type||(i=t=t.val)),i=Math.max(Math.min(i,1),0),new o.RGBA(s("r"),s("g"),s("b"),Math.round(100*i)/100)}}),o.register("functions/type.js",function(t,e,n){var i=n("../utils");t.exports=function(t){return i.assertPresent(t,"expression"),t.nodeName}}),o.register("functions/unit.js",function(t,e,n){var i=n("../utils"),s=n("../nodes");t.exports=function(t,e){return i.assertType(t,"unit","unit"),e?(i.assertString(e,"type"),new s.Unit(t.val,e.string)):t.type||""}}),o.register("functions/unquote.js",function(t,e,n){var i=n("../utils"),s=n("../nodes");t.exports=function(t){return i.assertString(t,"string"),new s.Literal(t.string)}}),o.register("functions/unshift.js",function(t,e,n){var i=n("../utils");(t.exports=function(t){t=i.unwrap(t);for(var e=1,n=arguments.length;e<n;++e)t.nodes.unshift(i.unwrap(arguments[e]));return t.nodes.length}).raw=!0}),o.register("functions/warn.js",function(t,e,n){var i=n("../utils"),s=n("../nodes");t.exports=function(t){return i.assertType(t,"string","msg"),console.warn("Warning: %s",t.val),s.nil}}),o.register("lexer.js",function(t,e,n){var a=n("./token"),l=n("./nodes"),s=n("./errors");t.exports=r;var i={and:"&&",or:"||",is:"==",isnt:"!=","is not":"!=",":=":"?="};function r(t,e){function n(t,e,n,i){var s=i.lastIndexOf("/*",n)>i.lastIndexOf("*/",n),r=i.lastIndexOf("//",n),o=i.lastIndexOf("\n",n),a=0,l=0;if(~r&&o<r)for(;o!=n;){if("'"==i[o]&&(l?l--:l++),'"'==i[o]&&(a?a--:a++),"/"==i[o]&&"/"==i[o+1]){s=!l&&!a;break}++o}return s?t:e+"\r"}e=e||{},this.stash=[],this.indentStack=[],this.indentRe=null,this.lineno=1,this.column=1,"\ufeff"==t.charAt(0)&&(t=t.slice(1)),this.str=t.replace(/\s+$/,"\n").replace(/\r\n?/g,"\n").replace(/\\ *\n/g,"\r").replace(/([,(:](?!\/\/[^ ])) *(?:\/\/[^\n]*)?\n\s*/g,n).replace(/\s*\n[ \t]*([,)])/g,n)}r.prototype={inspect:function(){for(var t,e=this.str,n=[];"eos"!=(t=this.next()).type;)n.push(t.inspect());return this.str=e,n.concat(t.inspect()).join("\n")},lookahead:function(t){for(var e=t-this.stash.length;0<e--;)this.stash.push(this.advance());return this.stash[--t]},skip:function(t){var e=t[0];t=e?e.length:t,this.str=this.str.substr(t),e?this.move(e):this.column+=t},move:function(t){var e=t.match(/\n/g),n=t.lastIndexOf("\n");e&&(this.lineno+=e.length),this.column=~n?t.length-n:this.column+t.length},next:function(){var t=this.stashed()||this.advance();return this.prev=t},isPartOfSelector:function(){var t=this.stash[this.stash.length-1]||this.prev;switch(t&&t.type){case"color":return 2==t.val.raw.length;case".":case"[":return!0}return!1},advance:function(){var t=this.column,e=this.lineno,n=this.eos()||this.nil()||this.sep()||this.keyword()||this.urlchars()||this.comment()||this.newline()||this.escaped()||this.important()||this.literal()||this.fun()||this.anonFunc()||this.atrule()||this.brace()||this.paren()||this.color()||this.string()||this.unit()||this.namedop()||this.boolean()||this.unicode()||this.ident()||this.op()||this.eol()||this.space()||this.selector();return n.lineno=e,n.column=t,n},peek:function(){return this.lookahead(1)},stashed:function(){return this.stash.shift()},eos:function(){if(!this.str.length)return this.indentStack.length?(this.indentStack.shift(),new a("outdent")):new a("eos")},urlchars:function(){var t;if(this.isURL)return(t=/^[\/:@.;?&=*!,<>#%0-9]+/.exec(this.str))?(this.skip(t),new a("literal",new l.Literal(t[0]))):void 0},sep:function(){var t;if(t=/^;[ \t]*/.exec(this.str))return this.skip(t),new a(";")},eol:function(){if("\r"==this.str[0])return++this.lineno,this.skip(1),this.advance()},space:function(){var t;if(t=/^([ \t]+)/.exec(this.str))return this.skip(t),new a("space")},escaped:function(){var t;if(t=/^\\(.)[ \t]*/.exec(this.str)){var e=t[1];return this.skip(t),new a("ident",new l.Literal(e))}},literal:function(){var t;if(t=/^@css[ \t]*\{/.exec(this.str)){this.skip(t);for(var e,n,i=1,s="";e=this.str[0];){switch(this.str=this.str.substr(1),e){case"{":++i;break;case"}":--i;break;case"\n":case"\r":++this.lineno}if(s+=e,!i)break}return s=s.replace(/\s*}$/,""),(n=new l.Literal(s)).css=!0,new a("literal",n)}},important:function(){var t;if(t=/^!important[ \t]*/.exec(this.str))return this.skip(t),new a("ident",new l.Literal("!important"))},brace:function(){var t;if(t=/^([{}])/.exec(this.str)){this.skip(1);var e=t[1];return new a(e,e)}},paren:function(){var t;if(t=/^([()])([ \t]*)/.exec(this.str)){var e=t[1];this.skip(t),")"==e&&(this.isURL=!1);var n=new a(e,e);return n.space=t[2],n}},nil:function(){var t;if(t=/^(null)\b[ \t]*/.exec(this.str))return this.skip(t),this.isPartOfSelector()?new a("ident",new l.Ident(t[0])):new a("null",l.nil)},keyword:function(){var t;if(t=/^(return|if|else|unless|for|in)\b[ \t]*/.exec(this.str)){var e=t[1];return this.skip(t),this.isPartOfSelector()?new a("ident",new l.Ident(t[0])):new a(e,e)}},namedop:function(){var t,e;if(t=/^(not|and|or|is a|is defined|isnt|is not|is)(?!-)\b([ \t]*)/.exec(this.str)){var n=t[1];return this.skip(t),(e=this.isPartOfSelector()?new a("ident",new l.Ident(t[0])):new a(n=i[n]||n,n)).space=t[2],e}},op:function(){var t;if(t=/^([.]{1,3}|&&|\|\||[!<>=?:]=|\*\*|[-+*\/%]=?|[,=?:!~<>&\[\]])([ \t]*)/.exec(this.str)){var e=t[1];this.skip(t);var n=new a(e=i[e]||e,e);return n.space=t[2],this.isURL=!1,n}},anonFunc:function(){var t;if("@"==this.str[0]&&"("==this.str[1])return this.skip(2),(t=new a("function",new l.Ident("anonymous"))).anonymous=!0,t},atrule:function(){var t;if(t=/^@(?:-(\w+)-)?([a-zA-Z0-9-_]+)[ \t]*/.exec(this.str)){this.skip(t);var e=t[1],n=t[2];switch(n){case"require":case"import":case"charset":case"namespace":case"media":case"scope":case"supports":return new a(n);case"document":return new a("-moz-document");case"block":return new a("atblock");case"extend":case"extends":return new a("extend");case"keyframes":return new a(n,e);default:return new a("atrule",e?"-"+e+"-"+n:n)}}},comment:function(){if("/"==this.str[0]&&"/"==this.str[1])return-1==(t=this.str.indexOf("\n"))&&(t=this.str.length),this.skip(t),this.advance();if("/"==this.str[0]&&"*"==this.str[1]){var t;-1==(t=this.str.indexOf("*/"))&&(t=this.str.length);var e=this.str.substr(0,t+2),n=e.split(/\n|\r/).length-1,i=!0,s=!1;return this.lineno+=n,this.skip(t+2),"!"==e[2]&&(e=e.replace("*!","*"),i=!1),this.prev&&";"==this.prev.type&&(s=!0),new a("comment",new l.Comment(e,i,s))}},boolean:function(){var t;if(t=/^(true|false)\b([ \t]*)/.exec(this.str)){var e=l.Boolean("true"==t[1]);this.skip(t);var n=new a("boolean",e);return n.space=t[2],n}},unicode:function(){var t;if(t=/^u\+[0-9a-f?]{1,6}(?:-[0-9a-f]{1,6})?/i.exec(this.str))return this.skip(t),new a("literal",new l.Literal(t[0]))},fun:function(){var t;if(t=/^(-*[_a-zA-Z$][-\w\d$]*)\(([ \t]*)/.exec(this.str)){var e=t[1];this.skip(t),this.isURL="url"==e;var n=new a("function",new l.Ident(e));return n.space=t[2],n}},ident:function(){var t;if(t=/^-*[_a-zA-Z$][-\w\d$]*/.exec(this.str))return this.skip(t),new a("ident",new l.Ident(t[0]))},newline:function(){var t,e;if(this.indentRe?t=this.indentRe.exec(this.str):((t=(e=/^\n([\t]*)[ \t]*/).exec(this.str))&&!t[1].length&&(t=(e=/^\n([ \t]*)/).exec(this.str)),t&&t[1].length&&(this.indentRe=e)),t){var n,i=t[1].length;if(this.skip(t)," "===this.str[0]||"\t"===this.str[0])throw new s.SyntaxError("Invalid indentation. You can use tabs or spaces to indent, but not both.");if("\n"==this.str[0])return this.advance();if(this.indentStack.length&&i<this.indentStack[0]){for(;this.indentStack.length&&this.indentStack[0]>i;)this.stash.push(new a("outdent")),this.indentStack.shift();n=this.stash.pop()}else i&&i!=this.indentStack[0]?(this.indentStack.unshift(i),n=new a("indent")):n=new a("newline");return n}},unit:function(){var t;if(t=/^(-)?(\d+\.\d+|\d+|\.\d+)(%|[a-zA-Z]+)?[ \t]*/.exec(this.str)){this.skip(t);var e=parseFloat(t[2]);"-"==t[1]&&(e=-e);var n=new l.Unit(e,t[3]);return n.raw=t[0],new a("unit",n)}},string:function(){var t;if(t=/^("[^"]*"|'[^']*')[ \t]*/.exec(this.str)){var e=t[1],n=t[0][0];return this.skip(t),e=e.slice(1,-1).replace(/\\n/g,"\n"),new a("string",new l.String(e,n))}},color:function(){return this.rrggbbaa()||this.rrggbb()||this.rgba()||this.rgb()||this.nn()||this.n()},n:function(){var t;if(t=/^#([a-fA-F0-9]{1})[ \t]*/.exec(this.str)){this.skip(t);var e=parseInt(t[1]+t[1],16),n=new l.RGBA(e,e,e,1);return n.raw=t[0],new a("color",n)}},nn:function(){var t;if(t=/^#([a-fA-F0-9]{2})[ \t]*/.exec(this.str)){this.skip(t);var e=parseInt(t[1],16),n=new l.RGBA(e,e,e,1);return n.raw=t[0],new a("color",n)}},rgb:function(){var t;if(t=/^#([a-fA-F0-9]{3})[ \t]*/.exec(this.str)){this.skip(t);var e=t[1],n=parseInt(e[0]+e[0],16),i=parseInt(e[1]+e[1],16),s=parseInt(e[2]+e[2],16),r=new l.RGBA(n,i,s,1);return r.raw=t[0],new a("color",r)}},rgba:function(){var t;if(t=/^#([a-fA-F0-9]{4})[ \t]*/.exec(this.str)){this.skip(t);var e=t[1],n=parseInt(e[0]+e[0],16),i=parseInt(e[1]+e[1],16),s=parseInt(e[2]+e[2],16),r=parseInt(e[3]+e[3],16),o=new l.RGBA(n,i,s,r/255);return o.raw=t[0],new a("color",o)}},rrggbb:function(){var t;if(t=/^#([a-fA-F0-9]{6})[ \t]*/.exec(this.str)){this.skip(t);var e=t[1],n=parseInt(e.substr(0,2),16),i=parseInt(e.substr(2,2),16),s=parseInt(e.substr(4,2),16),r=new l.RGBA(n,i,s,1);return r.raw=t[0],new a("color",r)}},rrggbbaa:function(){var t;if(t=/^#([a-fA-F0-9]{8})[ \t]*/.exec(this.str)){this.skip(t);var e=t[1],n=parseInt(e.substr(0,2),16),i=parseInt(e.substr(2,2),16),s=parseInt(e.substr(4,2),16),r=parseInt(e.substr(6,2),16),o=new l.RGBA(n,i,s,r/255);return o.raw=t[0],new a("color",o)}},selector:function(){var t;if(t=/^\^|.*?(?=\/\/(?![^\[]*\])|[,\n{])/.exec(this.str)){var e=t[0];return this.skip(t),new a("selector",e)}}}}),o.register("nodes/arguments.js",function(t,e,n){n("./node");var i=n("../nodes"),s=(n("../utils"),t.exports=function(){i.Expression.call(this),this.map={}});s.prototype.__proto__=i.Expression.prototype,s.fromExpression=function(t){var e=new s,n=t.nodes.length;e.lineno=t.lineno,e.column=t.column,e.isList=t.isList;for(var i=0;i<n;++i)e.push(t.nodes[i]);return e},s.prototype.clone=function(t){var e=i.Expression.prototype.clone.call(this,t);for(var n in e.map={},this.map)e.map[n]=this.map[n].clone(t,e);return e.isList=this.isList,e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,e},s.prototype.toJSON=function(){return{__type:"Arguments",map:this.map,isList:this.isList,preserve:this.preserve,lineno:this.lineno,column:this.column,filename:this.filename,nodes:this.nodes}}}),o.register("nodes/binop.js",function(t,e,n){var i=n("./node"),s=t.exports=function(t,e,n){i.call(this),this.op=t,this.left=e,this.right=n};s.prototype.__proto__=i.prototype,s.prototype.clone=function(t){var e=new s(this.op);return e.left=this.left.clone(t,e),e.right=this.right&&this.right.clone(t,e),e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,this.val&&(e.val=this.val.clone(t,e)),e},s.prototype.toString=function(){return this.left.toString()+" "+this.op+" "+this.right.toString()},s.prototype.toJSON=function(){var t={__type:"BinOp",left:this.left,right:this.right,op:this.op,lineno:this.lineno,column:this.column,filename:this.filename};return this.val&&(t.val=this.val),t}}),o.register("nodes/block.js",function(t,e,n){var i=n("./node"),s=t.exports=function(t,e){i.call(this),this.nodes=[],this.parent=t,this.node=e,this.scope=!0};s.prototype.__proto__=i.prototype,s.prototype.__defineGetter__("hasProperties",function(){for(var t=0,e=this.nodes.length;t<e;++t)if("property"==this.nodes[t].nodeName)return!0}),s.prototype.__defineGetter__("hasMedia",function(){for(var t=0,e=this.nodes.length;t<e;++t){if("media"==this.nodes[t].nodeName)return!0}return!1}),s.prototype.__defineGetter__("isEmpty",function(){return!this.nodes.length}),s.prototype.clone=function(t,e){t=t||this.parent;var n=new s(t,e||this.node);return n.lineno=this.lineno,n.column=this.column,n.filename=this.filename,n.scope=this.scope,this.nodes.forEach(function(t){n.push(t.clone(n,n))}),n},s.prototype.push=function(t){this.nodes.push(t)},s.prototype.toJSON=function(){return{__type:"Block",scope:this.scope,lineno:this.lineno,column:this.column,filename:this.filename,nodes:this.nodes}}}),o.register("nodes/boolean.js",function(t,e,n){var i=n("./node"),s=(n("./index"),t.exports=function t(e){if(i.call(this),!this.nodeName)return new t(e);this.val=!!e});s.prototype.__proto__=i.prototype,s.prototype.toBoolean=function(){return this},s.prototype.__defineGetter__("isTrue",function(){return this.val}),s.prototype.__defineGetter__("isFalse",function(){return!this.val}),s.prototype.negate=function(){return new s(!this.val)},s.prototype.inspect=function(){return"[Boolean "+this.val+"]"},s.prototype.toString=function(){return this.val?"true":"false"},s.prototype.toJSON=function(){return{__type:"Boolean",val:this.val}}}),o.register("nodes/call.js",function(t,e,n){var i=n("./node"),s=t.exports=function(t,e){i.call(this),this.name=t,this.args=e};s.prototype.__proto__=i.prototype,s.prototype.clone=function(t){var e=new s(this.name);return e.args=this.args.clone(t,e),this.block&&(e.block=this.block.clone(t,e)),e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,e},s.prototype.toString=function(){var t=this.args.nodes.map(function(t){var e=t.toString();return e.slice(1,e.length-1)}).join(", ");return this.name+"("+t+")"},s.prototype.toJSON=function(){var t={__type:"Call",name:this.name,args:this.args,lineno:this.lineno,column:this.column,filename:this.filename};return this.block&&(t.block=this.block),t}}),o.register("nodes/charset.js",function(t,e,n){var i=n("./node"),s=t.exports=function(t){i.call(this),this.val=t};s.prototype.__proto__=i.prototype,s.prototype.toString=function(){return"@charset "+this.val},s.prototype.toJSON=function(){return{__type:"Charset",val:this.val,lineno:this.lineno,column:this.column,filename:this.filename}}}),o.register("nodes/namespace.js",function(t,e,n){var i=n("./node"),s=t.exports=function(t,e){i.call(this),this.val=t,this.prefix=e};s.prototype.__proto__=i.prototype,s.prototype.toString=function(){return"@namespace "+(this.prefix?this.prefix+" ":"")+this.val},s.prototype.toJSON=function(){return{__type:"Namespace",val:this.val,prefix:this.prefix,lineno:this.lineno,column:this.column,filename:this.filename}}}),o.register("nodes/comment.js",function(t,e,n){var i=n("./node"),s=t.exports=function(t,e,n){i.call(this),this.str=t,this.suppress=e,this.inline=n};s.prototype.__proto__=i.prototype,s.prototype.toJSON=function(){return{__type:"Comment",str:this.str,suppress:this.suppress,inline:this.inline,lineno:this.lineno,column:this.column,filename:this.filename}},s.prototype.toString=function(){return this.str}}),o.register("nodes/each.js",function(t,e,n){var s=n("./node"),i=(n("./index"),t.exports=function(t,e,n,i){s.call(this),this.val=t,this.key=e,this.expr=n,this.block=i});i.prototype.__proto__=s.prototype,i.prototype.clone=function(t){var e=new i(this.val,this.key);return e.expr=this.expr.clone(t,e),e.block=this.block.clone(t,e),e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,e},i.prototype.toJSON=function(){return{__type:"Each",val:this.val,key:this.key,expr:this.expr,block:this.block,lineno:this.lineno,column:this.column,filename:this.filename}}}),o.register("nodes/expression.js",function(t,e,n){var h=n("./node"),f=n("../nodes"),d=n("../utils"),i=t.exports=function(t){h.call(this),this.nodes=[],this.isList=t};i.prototype.__defineGetter__("isEmpty",function(){return!this.nodes.length}),i.prototype.__defineGetter__("first",function(){return this.nodes[0]?this.nodes[0].first:f.nil}),i.prototype.__defineGetter__("hash",function(){return this.nodes.map(function(t){return t.hash}).join("::")}),i.prototype.__proto__=h.prototype,i.prototype.clone=function(e){var n=new this.constructor(this.isList);return n.preserve=this.preserve,n.lineno=this.lineno,n.column=this.column,n.filename=this.filename,n.nodes=this.nodes.map(function(t){return t.clone(e,n)}),n},i.prototype.push=function(t){this.nodes.push(t)},i.prototype.operate=function(t,e,i){switch(t){case"[]=":var s=this,n=d.unwrap(e).nodes;i=d.unwrap(i);return n.forEach(function(t){if(p=s.nodes.length,"unit"==t.nodeName){for(var e=t.val<0?p+t.val:t.val,n=e;e-- >p;)s.nodes[e]=f.nil;s.nodes[n]=i}else t.string&&(r=s.nodes[0])&&"object"==r.nodeName&&r.set(t.string,i.clone())}),i;case"[]":var r,o=new f.Expression,a=d.unwrap(this).nodes;return(n=d.unwrap(e).nodes).forEach(function(t){"unit"==t.nodeName?r=a[t.val<0?a.length+t.val:t.val]:"object"==a[0].nodeName&&(r=a[0].get(t.string)),r&&o.push(r)}),o.isEmpty?f.nil:d.unwrap(o);case"||":return this.toBoolean().isTrue?this:e;case"in":return h.prototype.operate.call(this,t,e);case"!=":return this.operate("==",e,i).negate();case"==":var l,c,p=this.nodes.length;e=e.toExpression();if(p!=e.nodes.length)return f.no;for(var u=0;u<p;++u)if(l=this.nodes[u],c=e.nodes[u],!l.operate(t,c).isTrue)return f.no;return f.yes;default:return this.first.operate(t,e,i)}},i.prototype.toBoolean=function(){return 1<this.nodes.length?f.yes:this.first.toBoolean()},i.prototype.toString=function(){return"("+this.nodes.map(function(t){return t.toString()}).join(this.isList?", ":" ")+")"},i.prototype.toJSON=function(){return{__type:"Expression",isList:this.isList,preserve:this.preserve,lineno:this.lineno,column:this.column,filename:this.filename,nodes:this.nodes}}}),o.register("nodes/function.js",function(t,e,n){var i=n("./node"),s=t.exports=function(t,e,n){i.call(this),this.name=t,this.params=e,this.block=n,"function"==typeof e&&(this.fn=e)};s.prototype.__defineGetter__("arity",function(){return this.params.length}),s.prototype.__proto__=i.prototype,s.prototype.__defineGetter__("hash",function(){return"function "+this.name}),s.prototype.clone=function(t){if(this.fn)var e=new s(this.name,this.fn);else(e=new s(this.name)).params=this.params.clone(t,e),e.block=this.block.clone(t,e);return e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,e},s.prototype.toString=function(){return this.fn?this.name+"("+this.fn.toString().match(/^function *\w*\((.*?)\)/).slice(1).join(", ")+")":this.name+"("+this.params.nodes.join(", ")+")"},s.prototype.toJSON=function(){var t={__type:"Function",name:this.name,lineno:this.lineno,column:this.column,filename:this.filename};return this.fn?t.fn=this.fn:(t.params=this.params,t.block=this.block),t}}),o.register("nodes/group.js",function(t,e,n){var i=n("./node"),s=t.exports=function(){i.call(this),this.nodes=[],this.extends=[]};s.prototype.__proto__=i.prototype,s.prototype.push=function(t){this.nodes.push(t)},s.prototype.__defineGetter__("block",function(){return this.nodes[0].block}),s.prototype.__defineSetter__("block",function(t){for(var e=0,n=this.nodes.length;e<n;++e)this.nodes[e].block=t}),s.prototype.__defineGetter__("hasOnlyPlaceholders",function(){return this.nodes.every(function(t){return t.isPlaceholder})}),s.prototype.clone=function(e){var n=new s;return n.lineno=this.lineno,n.column=this.column,this.nodes.forEach(function(t){n.push(t.clone(e,n))}),n.filename=this.filename,n.block=this.block.clone(e,n),n},s.prototype.toJSON=function(){return{__type:"Group",nodes:this.nodes,block:this.block,lineno:this.lineno,column:this.column,filename:this.filename}}}),o.register("nodes/hsla.js",function(t,e,n){var r=n("./node"),i=n("./index"),u=e=t.exports=function(t,e,n,i){var s;r.call(this),this.h=o(t),this.s=a(e),this.l=a(n),this.a=(s=i,Math.max(0,Math.min(s,1))),this.hsla=this};function o(t){return 0<=(t%=360)?t:360+t}function a(t){return Math.max(0,Math.min(t,100))}u.prototype.__proto__=r.prototype,u.prototype.toString=function(){return"hsla("+this.h+","+this.s.toFixed(0)+"%,"+this.l.toFixed(0)+"%,"+this.a+")"},u.prototype.clone=function(t){var e=new u(this.h,this.s,this.l,this.a);return e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,e},u.prototype.toJSON=function(){return{__type:"HSLA",h:this.h,s:this.s,l:this.l,a:this.a,lineno:this.lineno,column:this.column,filename:this.filename}},u.prototype.__defineGetter__("rgba",function(){return i.RGBA.fromHSLA(this)}),u.prototype.__defineGetter__("hash",function(){return this.rgba.toString()}),u.prototype.add=function(t,e,n){return new u(this.h+t,this.s+e,this.l+n,this.a)},u.prototype.sub=function(t,e,n){return this.add(-t,-e,-n)},u.prototype.operate=function(t,e){switch(t){case"==":case"!=":case"<=":case">=":case"<":case">":case"is a":case"||":case"&&":return this.rgba.operate(t,e);default:return this.rgba.operate(t,e).hsla}},e.fromRGBA=function(t){var e,n,i=t.r/255,s=t.g/255,r=t.b/255,o=t.a,a=Math.min(i,s,r),l=Math.max(i,s,r),c=(l+a)/2,p=l-a;switch(l){case a:e=0;break;case i:e=60*(s-r)/p;break;case s:e=60*(r-i)/p+120;break;case r:e=60*(i-s)/p+240}return n=l==a?0:c<.5?p/(2*c):p/(2-2*c),new u(e%=360,n*=100,c*=100,o)},u.prototype.adjustLightness=function(t){return this.l=a(this.l+this.l*(t/100)),this},u.prototype.adjustHue=function(t){return this.h=o(this.h+t),this}}),o.register("nodes/ident.js",function(t,e,n){var s=n("./node"),r=n("./index"),i=t.exports=function(t,e,n){s.call(this),this.name=t,this.string=t,this.val=e||r.nil,this.mixin=!!n};i.prototype.__defineGetter__("isEmpty",function(){return null==this.val}),i.prototype.__defineGetter__("hash",function(){return this.name}),i.prototype.__proto__=s.prototype,i.prototype.clone=function(t){var e=new i(this.name);return e.val=this.val.clone(t,e),e.mixin=this.mixin,e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,e.property=this.property,e.rest=this.rest,e},i.prototype.toJSON=function(){return{__type:"Ident",name:this.name,val:this.val,mixin:this.mixin,property:this.property,rest:this.rest,lineno:this.lineno,column:this.column,filename:this.filename}},i.prototype.toString=function(){return this.name},i.prototype.coerce=function(t){switch(t.nodeName){case"ident":case"string":case"literal":return new i(t.string);case"unit":return new i(t.toString());default:return s.prototype.coerce.call(this,t)}},i.prototype.operate=function(t,e){var n=e.first;switch(t){case"-":if("unit"==n.nodeName){var i=new r.Expression;return(n=n.clone()).val=-n.val,i.push(this),i.push(n),i}case"+":return new r.Ident(this.string+this.coerce(n).string)}return s.prototype.operate.call(this,t,e)}}),o.register("nodes/if.js",function(t,e,n){var i=n("./node"),s=t.exports=function(t,e){i.call(this),this.cond=t,this.elses=[],e&&e.nodeName?this.block=e:this.negate=e};s.prototype.__proto__=i.prototype,s.prototype.clone=function(e){var n=new s;return n.cond=this.cond.clone(e,n),n.block=this.block.clone(e,n),n.elses=this.elses.map(function(t){return t.clone(e,n)}),n.negate=this.negate,n.postfix=this.postfix,n.lineno=this.lineno,n.column=this.column,n.filename=this.filename,n},s.prototype.toJSON=function(){return{__type:"If",cond:this.cond,block:this.block,elses:this.elses,negate:this.negate,postfix:this.postfix,lineno:this.lineno,column:this.column,filename:this.filename}}}),o.register("nodes/import.js",function(t,e,n){var i=n("./node"),s=t.exports=function(t,e){i.call(this),this.path=t,this.once=e||!1};s.prototype.__proto__=i.prototype,s.prototype.clone=function(t){var e=new s;return e.path=this.path.nodeName?this.path.clone(t,e):this.path,e.once=this.once,e.mtime=this.mtime,e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,e},s.prototype.toJSON=function(){return{__type:"Import",path:this.path,once:this.once,mtime:this.mtime,lineno:this.lineno,column:this.column,filename:this.filename}}}),o.register("nodes/extend.js",function(t,e,n){var i=n("./node"),s=t.exports=function(t){i.call(this),this.selectors=t};s.prototype.__proto__=i.prototype,s.prototype.clone=function(){return new s(this.selectors)},s.prototype.toString=function(){return"@extend "+this.selectors.join(", ")},s.prototype.toJSON=function(){return{__type:"Extend",selectors:this.selectors,lineno:this.lineno,column:this.column,filename:this.filename}}}),o.register("nodes/index.js",function(t,e,n){e.Node=n("./node"),e.Root=n("./root"),e.Null=n("./null"),e.Each=n("./each"),e.If=n("./if"),e.Call=n("./call"),e.UnaryOp=n("./unaryop"),e.BinOp=n("./binop"),e.Ternary=n("./ternary"),e.Block=n("./block"),e.Unit=n("./unit"),e.String=n("./string"),e.HSLA=n("./hsla"),e.RGBA=n("./rgba"),e.Ident=n("./ident"),e.Group=n("./group"),e.Literal=n("./literal"),e.Boolean=n("./boolean"),e.Return=n("./return"),e.Media=n("./media"),e.QueryList=n("./query-list"),e.Query=n("./query"),e.Feature=n("./feature"),e.Params=n("./params"),e.Comment=n("./comment"),e.Keyframes=n("./keyframes"),e.Member=n("./member"),e.Charset=n("./charset"),e.Namespace=n("./namespace"),e.Import=n("./import"),e.Extend=n("./extend"),e.Object=n("./object"),e.Function=n("./function"),e.Property=n("./property"),e.Selector=n("./selector"),e.Expression=n("./expression"),e.Arguments=n("./arguments"),e.Atblock=n("./atblock"),e.Atrule=n("./atrule"),e.Supports=n("./supports"),e.yes=new e.Boolean(!0),e.no=new e.Boolean(!1),e.nil=new e.Null}),o.register("nodes/keyframes.js",function(t,e,n){var i=n("./atrule"),s=t.exports=function(t,e){i.call(this,"keyframes"),this.segments=t,this.prefix=e||"official"};s.prototype.__proto__=i.prototype,s.prototype.clone=function(e){var n=new s;return n.lineno=this.lineno,n.column=this.column,n.filename=this.filename,n.segments=this.segments.map(function(t){return t.clone(e,n)}),n.prefix=this.prefix,n.block=this.block.clone(e,n),n},s.prototype.toJSON=function(){return{__type:"Keyframes",segments:this.segments,prefix:this.prefix,block:this.block,lineno:this.lineno,column:this.column,filename:this.filename}},s.prototype.toString=function(){return"@keyframes "+this.segments.join("")}}),o.register("nodes/literal.js",function(t,e,n){var i=n("./node"),s=n("./index"),r=t.exports=function(t){i.call(this),this.val=t,this.string=t,this.prefixed=!1};r.prototype.__proto__=i.prototype,r.prototype.__defineGetter__("hash",function(){return this.val}),r.prototype.toString=function(){return this.val},r.prototype.coerce=function(t){switch(t.nodeName){case"ident":case"string":case"literal":return new r(t.string);default:return i.prototype.coerce.call(this,t)}},r.prototype.operate=function(t,e){var n=e.first;switch(t){case"+":return new s.Literal(this.string+this.coerce(n).string);default:return i.prototype.operate.call(this,t,e)}},r.prototype.toJSON=function(){return{__type:"Literal",val:this.val,string:this.string,prefixed:this.prefixed,lineno:this.lineno,column:this.column,filename:this.filename}}}),o.register("nodes/media.js",function(t,e,n){var i=n("./atrule"),s=t.exports=function(t){i.call(this,"media"),this.val=t};s.prototype.__proto__=i.prototype,s.prototype.clone=function(t){var e=new s;return e.val=this.val.clone(t,e),e.block=this.block.clone(t,e),e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,e},s.prototype.toJSON=function(){return{__type:"Media",val:this.val,block:this.block,lineno:this.lineno,column:this.column,filename:this.filename}},s.prototype.toString=function(){return"@media "+this.val}}),o.register("nodes/query-list.js",function(t,e,n){var i=n("./node"),o=t.exports=function(){i.call(this),this.nodes=[]};o.prototype.__proto__=i.prototype,o.prototype.clone=function(t){var e=new o;e.lineno=this.lineno,e.column=this.column,e.filename=this.filename;for(var n=0;n<this.nodes.length;++n)e.push(this.nodes[n].clone(t,e));return e},o.prototype.push=function(t){this.nodes.push(t)},o.prototype.merge=function(i){var s,r=new o;return this.nodes.forEach(function(t){for(var e=0,n=i.nodes.length;e<n;++e)(s=t.merge(i.nodes[e]))&&r.push(s)}),r},o.prototype.toString=function(){return"("+this.nodes.map(function(t){return t.toString()}).join(", ")+")"},o.prototype.toJSON=function(){return{__type:"QueryList",nodes:this.nodes,lineno:this.lineno,column:this.column,filename:this.filename}}}),o.register("nodes/query.js",function(t,e,n){var i=n("./node"),l=t.exports=function(){i.call(this),this.nodes=[],this.type="",this.predicate=""};l.prototype.__proto__=i.prototype,l.prototype.clone=function(t){var e=new l;e.predicate=this.predicate,e.type=this.type;for(var n=0,i=this.nodes.length;n<i;++n)e.push(this.nodes[n].clone(t,e));return e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,e},l.prototype.push=function(t){this.nodes.push(t)},l.prototype.__defineGetter__("resolvedType",function(){if(this.type)return this.type.nodeName?this.type.string:this.type}),l.prototype.__defineGetter__("resolvedPredicate",function(){if(this.predicate)return this.predicate.nodeName?this.predicate.string:this.predicate}),l.prototype.merge=function(t){var e,n,i=new l,s=this.resolvedPredicate,r=t.resolvedPredicate,o=this.resolvedType,a=t.resolvedType;if(o=o||a,a=a||o,"not"==s^"not"==r){if(o==a)return;e="not"==s?a:o,n="not"==s?r:s}else if("not"==s&&"not"==r){if(o!=a)return;e=o,n="not"}else{if(o!=a)return;e=o,n=s||r}return i.predicate=n,i.type=e,i.nodes=this.nodes.concat(t.nodes),i},l.prototype.toString=function(){var t=this.predicate?this.predicate+" ":"",e=this.type||"",n=t+e;return this.nodes.length&&(n+=(e&&" and ")+this.nodes.map(function(t){return t.toString()}).join(" and ")),n},l.prototype.toJSON=function(){return{__type:"Query",predicate:this.predicate,type:this.type,nodes:this.nodes,lineno:this.lineno,column:this.column,filename:this.filename}}}),o.register("nodes/feature.js",function(t,e,n){var i=n("./node"),s=t.exports=function(t){i.call(this),this.segments=t,this.expr=null};s.prototype.__proto__=i.prototype,s.prototype.clone=function(e){var n=new s;return n.segments=this.segments.map(function(t){return t.clone(e,n)}),this.expr&&(n.expr=this.expr.clone(e,n)),this.name&&(n.name=this.name),n.lineno=this.lineno,n.column=this.column,n.filename=this.filename,n},s.prototype.toString=function(){return this.expr?"("+this.segments.join("")+": "+this.expr.toString()+")":this.segments.join("")},s.prototype.toJSON=function(){var t={__type:"Feature",segments:this.segments,lineno:this.lineno,column:this.column,filename:this.filename};return this.expr&&(t.expr=this.expr),this.name&&(t.name=this.name),t}}),o.register("nodes/node.js",function(t,e,n){var i=n("../visitor/evaluator"),c=n("../utils"),p=n("./index");function s(t){this.name="CoercionError",this.message=t,Error.captureStackTrace(this,s)}s.prototype.__proto__=Error.prototype;var r=t.exports=function(){this.lineno=p.lineno||1,this.column=p.column||1,this.filename=p.filename};r.prototype={constructor:r,get first(){return this},get hash(){return this.val},get nodeName(){return this.constructor.name.toLowerCase()},clone:function(){return this},toJSON:function(){return{lineno:this.lineno,column:this.column,filename:this.filename}},eval:function(){return new i(this).evaluate()},toBoolean:function(){return p.yes},toExpression:function(){if("expression"==this.nodeName)return this;var t=new p.Expression;return t.push(this),t},shouldCoerce:function(t){switch(t){case"is a":case"in":case"||":case"&&":return!1;default:return!0}},operate:function(t,e){switch(t){case"is a":if("string"==e.nodeName)return p.Boolean(this.nodeName==e.val);throw new Error('"is a" expects a string, got '+e.toString());case"==":return p.Boolean(this.hash==e.hash);case"!=":return p.Boolean(this.hash!=e.hash);case">=":return p.Boolean(this.hash>=e.hash);case"<=":return p.Boolean(this.hash<=e.hash);case">":return p.Boolean(this.hash>e.hash);case"<":return p.Boolean(this.hash<e.hash);case"||":return this.toBoolean().isTrue?this:e;case"in":var n=c.unwrap(e).nodes,i=n&&n.length,s=this.hash;if(!n)throw new Error('"in" given invalid right-hand operand, expecting an expression');if(1==i&&"object"==n[0].nodeName)return p.Boolean(n[0].has(this.hash));for(var r=0;r<i;++r)if(s==n[r].hash)return p.yes;return p.no;case"&&":var o=this.toBoolean(),a=e.toBoolean();return o.isTrue&&a.isTrue?e:o.isFalse?this:e;default:if("[]"==t)var l="cannot perform "+this+"["+e+"]";else l="cannot perform "+this+" "+t+" "+e;throw new Error(l)}},coerce:function(t){if(t.nodeName==this.nodeName)return t;throw new s("cannot coerce "+t+" to "+this.nodeName)}}}),o.register("nodes/null.js",function(t,e,n){var i=n("./node"),s=n("./index"),r=t.exports=function(){};r.prototype.__proto__=i.prototype,r.prototype.inspect=r.prototype.toString=function(){return"null"},r.prototype.toBoolean=function(){return s.no},r.prototype.__defineGetter__("isNull",function(){return!0}),r.prototype.__defineGetter__("hash",function(){return null}),r.prototype.toJSON=function(){return{__type:"Null",lineno:this.lineno,column:this.column,filename:this.filename}}}),o.register("nodes/params.js",function(t,e,n){var i=n("./node"),s=t.exports=function(){i.call(this),this.nodes=[]};s.prototype.__defineGetter__("length",function(){return this.nodes.length}),s.prototype.__proto__=i.prototype,s.prototype.push=function(t){this.nodes.push(t)},s.prototype.clone=function(e){var n=new s;return n.lineno=this.lineno,n.column=this.column,n.filename=this.filename,this.nodes.forEach(function(t){n.push(t.clone(e,n))}),n},s.prototype.toJSON=function(){return{__type:"Params",nodes:this.nodes,lineno:this.lineno,column:this.column,filename:this.filename}}}),o.register("nodes/property.js",function(t,e,n){var i=n("./node"),s=t.exports=function(t,e){i.call(this),this.segments=t,this.expr=e};s.prototype.__proto__=i.prototype,s.prototype.clone=function(e){var n=new s(this.segments);return n.name=this.name,this.literal&&(n.literal=this.literal),n.lineno=this.lineno,n.column=this.column,n.filename=this.filename,n.segments=this.segments.map(function(t){return t.clone(e,n)}),this.expr&&(n.expr=this.expr.clone(e,n)),n},s.prototype.toJSON=function(){var t={__type:"Property",segments:this.segments,name:this.name,lineno:this.lineno,column:this.column,filename:this.filename};return this.expr&&(t.expr=this.expr),this.literal&&(t.literal=this.literal),t},s.prototype.toString=function(){return"property("+this.segments.join("")+", "+this.expr+")"},s.prototype.operate=function(t,e,n){return this.expr.operate(t,e,n)}}),o.register("nodes/return.js",function(t,e,n){var i=n("./node"),s=n("./index"),r=t.exports=function(t){this.expr=t||s.nil};r.prototype.__proto__=i.prototype,r.prototype.clone=function(t){var e=new r;return e.expr=this.expr.clone(t,e),e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,e},r.prototype.toJSON=function(){return{__type:"Return",expr:this.expr,lineno:this.lineno,column:this.column,filename:this.filename}}}),o.register("nodes/rgba.js",function(t,e,n){var r=n("./node"),i=n("./hsla"),s=n("../functions").adjust,o=n("./index"),u=e=t.exports=function(t,e,n,i){var s;r.call(this),this.r=a(t),this.g=a(e),this.b=a(n),this.a=(s=i,Math.max(0,Math.min(s,1))),this.name="",this.rgba=this};function a(t){return Math.max(0,Math.min(t.toFixed(0),255))}u.prototype.__proto__=r.prototype,u.withoutClamping=function(t,e,n,i){var s=new u(0,0,0,0);return s.r=t,s.g=e,s.b=n,s.a=i,s},u.prototype.clone=function(){var t=new u(this.r,this.g,this.b,this.a);return t.raw=this.raw,t.name=this.name,t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t},u.prototype.toJSON=function(){return{__type:"RGBA",r:this.r,g:this.g,b:this.b,a:this.a,raw:this.raw,name:this.name,lineno:this.lineno,column:this.column,filename:this.filename}},u.prototype.toBoolean=function(){return o.yes},u.prototype.__defineGetter__("hsla",function(){return i.fromRGBA(this)}),u.prototype.__defineGetter__("hash",function(){return this.toString()}),u.prototype.add=function(t,e,n,i){return new u(this.r+t,this.g+e,this.b+n,this.a+i)},u.prototype.sub=function(t,e,n,i){return new u(this.r-t,this.g-e,this.b-n,1==i?this.a:this.a-i)},u.prototype.multiply=function(t){return new u(this.r*t,this.g*t,this.b*t,this.a)},u.prototype.divide=function(t){return new u(this.r/t,this.g/t,this.b/t,this.a)},u.prototype.operate=function(t,e){switch("in"!=t&&(e=e.first),t){case"is a":if("string"==e.nodeName&&"color"==e.string)return o.yes;break;case"+":switch(e.nodeName){case"unit":var n=e.val;switch(e.type){case"%":return s(this,new o.String("lightness"),e);case"deg":return this.hsla.adjustHue(n).rgba;default:return this.add(n,n,n,0)}case"rgba":return this.add(e.r,e.g,e.b,e.a);case"hsla":return this.hsla.add(e.h,e.s,e.l)}break;case"-":switch(e.nodeName){case"unit":n=e.val;switch(e.type){case"%":return s(this,new o.String("lightness"),new o.Unit(-n,"%"));case"deg":return this.hsla.adjustHue(-n).rgba;default:return this.sub(n,n,n,0)}case"rgba":return this.sub(e.r,e.g,e.b,e.a);case"hsla":return this.hsla.sub(e.h,e.s,e.l)}break;case"*":switch(e.nodeName){case"unit":return this.multiply(e.val)}break;case"/":switch(e.nodeName){case"unit":return this.divide(e.val)}}return r.prototype.operate.call(this,t,e)},u.prototype.toString=function(){function t(t){return t<16?"0"+t.toString(16):t.toString(16)}if("transparent"==this.name)return this.name;if(1==this.a){var e=t(this.r),n=t(this.g),i=t(this.b);return e[0]==e[1]&&n[0]==n[1]&&i[0]==i[1]?"#"+e[0]+n[0]+i[0]:"#"+e+n+i}return"rgba("+this.r+","+this.g+","+this.b+","+ +this.a.toFixed(3)+")"},e.fromHSLA=function(t){var e=t.h/360,n=t.s/100,i=t.l/100,s=t.a,r=i<=.5?i*(n+1):i+n-i*n,o=2*i-r,a=255*p(e+1/3),l=255*p(e),c=255*p(e-1/3);function p(t){return t<0&&++t,1<t&&--t,6*t<1?o+(r-o)*t*6:2*t<1?r:3*t<2?o+(r-o)*(2/3-t)*6:o}return new u(a,l,c,s)}}),o.register("nodes/root.js",function(t,e,n){var i=n("./node"),s=t.exports=function(){this.nodes=[]};s.prototype.__proto__=i.prototype,s.prototype.push=function(t){this.nodes.push(t)},s.prototype.unshift=function(t){this.nodes.unshift(t)},s.prototype.clone=function(){var e=new s;return e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,this.nodes.forEach(function(t){e.push(t.clone(e,e))}),e},s.prototype.toString=function(){return"[Root]"},s.prototype.toJSON=function(){return{__type:"Root",nodes:this.nodes,lineno:this.lineno,column:this.column,filename:this.filename}}}),o.register("nodes/selector.js",function(t,e,n){n("./block");var i=n("./node"),s=t.exports=function(t){i.call(this),this.inherits=!0,this.segments=t,this.optional=!1};s.prototype.__proto__=i.prototype,s.prototype.toString=function(){return this.segments.join("")+(this.optional?" !optional":"")},s.prototype.__defineGetter__("isPlaceholder",function(){return this.val&&~this.val.substr(0,2).indexOf("$")}),s.prototype.clone=function(e){var n=new s;return n.lineno=this.lineno,n.column=this.column,n.filename=this.filename,n.inherits=this.inherits,n.val=this.val,n.segments=this.segments.map(function(t){return t.clone(e,n)}),n.optional=this.optional,n},s.prototype.toJSON=function(){return{__type:"Selector",inherits:this.inherits,segments:this.segments,optional:this.optional,val:this.val,lineno:this.lineno,column:this.column,filename:this.filename}}}),o.register("nodes/string.js",function(t,e,n){var s=n("./node"),r=n("../functions").s,o=n("../utils"),a=n("./index"),l=t.exports=function(t,e){s.call(this),this.val=t,this.string=t,this.prefixed=!1,this.quote="string"!=typeof e?"'":e};l.prototype.__proto__=s.prototype,l.prototype.toString=function(){return this.quote+this.val+this.quote},l.prototype.clone=function(){var t=new l(this.val,this.quote);return t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t},l.prototype.toJSON=function(){return{__type:"String",val:this.val,quote:this.quote,lineno:this.lineno,column:this.column,filename:this.filename}},l.prototype.toBoolean=function(){return a.Boolean(this.val.length)},l.prototype.coerce=function(t){switch(t.nodeName){case"string":return t;case"expression":return new l(t.nodes.map(function(t){return this.coerce(t).val},this).join(" "));default:return new l(t.toString())}},l.prototype.operate=function(t,e){switch(t){case"%":(i=new a.Expression).push(this);var n="expression"==e.nodeName?o.unwrap(e).nodes:[e];return r.apply(null,[i].concat(n));case"+":var i;return(i=new a.Expression).push(new l(this.val+this.coerce(e).val)),i;default:return s.prototype.operate.call(this,t,e)}}}),o.register("nodes/ternary.js",function(t,e,n){var i=n("./node"),s=t.exports=function(t,e,n){i.call(this),this.cond=t,this.trueExpr=e,this.falseExpr=n};s.prototype.__proto__=i.prototype,s.prototype.clone=function(t){var e=new s;return e.cond=this.cond.clone(t,e),e.trueExpr=this.trueExpr.clone(t,e),e.falseExpr=this.falseExpr.clone(t,e),e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,e},s.prototype.toJSON=function(){return{__type:"Ternary",cond:this.cond,trueExpr:this.trueExpr,falseExpr:this.falseExpr,lineno:this.lineno,column:this.column,filename:this.filename}}}),o.register("nodes/unaryop.js",function(t,e,n){var i=n("./node"),s=t.exports=function(t,e){i.call(this),this.op=t,this.expr=e};s.prototype.__proto__=i.prototype,s.prototype.clone=function(t){var e=new s(this.op);return e.expr=this.expr.clone(t,e),e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,e},s.prototype.toJSON=function(){return{__type:"UnaryOp",op:this.op,expr:this.expr,lineno:this.lineno,column:this.column,filename:this.filename}}}),o.register("nodes/unit.js",function(t,e,n){var a=n("./node"),l=n("./index"),o={mm:{val:1,label:"mm"},cm:{val:10,label:"mm"},in:{val:25.4,label:"mm"},pt:{val:25.4/72,label:"mm"},ms:{val:1,label:"ms"},s:{val:1e3,label:"ms"},Hz:{val:1,label:"Hz"},kHz:{val:1e3,label:"Hz"}},c=t.exports=function(t,e){a.call(this),this.val=t,this.type=e};c.prototype.__proto__=a.prototype,c.prototype.toBoolean=function(){return l.Boolean(!!this.type||this.val)},c.prototype.toString=function(){return this.val+(this.type||"")},c.prototype.clone=function(){var t=new c(this.val,this.type);return t.lineno=this.lineno,t.column=this.column,t.filename=this.filename,t},c.prototype.toJSON=function(){return{__type:"Unit",val:this.val,type:this.type,lineno:this.lineno,column:this.column,filename:this.filename}},c.prototype.operate=function(t,e){var n=this.type||e.first.type;if("rgba"==e.nodeName||"hsla"==e.nodeName)return e.operate(t,this);if(this.shouldCoerce(t))switch(e=e.first,e="%"==this.type||"-"!=t&&"+"!=t||"%"!=e.type?this.coerce(e):new c(this.val*(e.val/100),"%"),t){case"-":return new c(this.val-e.val,n);case"+":return n=n||"%"==e.type&&e.type,new c(this.val+e.val,n);case"/":return new c(this.val/e.val,n);case"*":return new c(this.val*e.val,n);case"%":return new c(this.val%e.val,n);case"**":return new c(Math.pow(this.val,e.val),n);case"..":case"...":var i=this.val,s=e.val,r=new l.Expression,o=".."==t;if(i<s)for(;r.push(new l.Unit(i)),o?++i<=s:++i<s;);else for(;r.push(new l.Unit(i)),o?--i>=s:--i>s;);return r}return a.prototype.operate.call(this,t,e)},c.prototype.coerce=function(t){if("unit"==t.nodeName){var e=t,n=o[this.type],i=o[e.type];if(n&&i&&n.label==i.label){var s=e.val*(i.val/n.val);return new l.Unit(s,this.type)}return new l.Unit(e.val,this.type)}if("string"==t.nodeName){if("%"==t.val)return new l.Unit(0,"%");var r=parseFloat(t.val);return isNaN(r)&&a.prototype.coerce.call(this,t),new l.Unit(r)}return a.prototype.coerce.call(this,t)}}),o.register("nodes/object.js",function(t,e,n){var o=n("./node"),a=n("./index"),i={}.constructor,s=t.exports=function(){o.call(this),this.vals={}};s.prototype.__proto__=o.prototype,s.prototype.set=function(t,e){return this.vals[t]=e,this},s.prototype.__defineGetter__("length",function(){return i.keys(this.vals).length}),s.prototype.get=function(t){return this.vals[t]||a.nil},s.prototype.has=function(t){return t in this.vals},s.prototype.operate=function(t,e){switch(t){case".":case"[]":return this.get(e.hash);case"==":var n,i,s=this.vals;if("object"!=e.nodeName||this.length!=e.length)return a.no;for(var r in s)if(n=s[r],i=e.vals[r],n.operate(t,i).isFalse)return a.no;return a.yes;case"!=":return this.operate("==",e).negate();default:return o.prototype.operate.call(this,t,e)}},s.prototype.toBoolean=function(){return a.Boolean(this.length)},s.prototype.toBlock=function(){var t,e,n="{";for(t in this.vals)if("object"==(e=this.get(t)).first.nodeName)n+=t+" "+e.first.toBlock();else switch(t){case"@charset":n+=t+" "+e.first.toString()+";";break;default:n+=t+":"+i(e)+";"}return n+="}";function i(t){return t.nodes?t.nodes.map(i).join(t.isList?",":" "):"literal"==t.nodeName&&","==t.val?"\\,":t.toString()}},s.prototype.clone=function(t){var e=new s;for(var n in e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,this.vals)e.vals[n]=this.vals[n].clone(t,e);return e},s.prototype.toJSON=function(){return{__type:"Object",vals:this.vals,lineno:this.lineno,column:this.column,filename:this.filename}},s.prototype.toString=function(){var t={};for(var e in this.vals)t[e]=this.vals[e].toString();return JSON.stringify(t)}}),o.register("nodes/supports.js",function(t,e,n){var i=n("./atrule"),s=t.exports=function(t){i.call(this,"supports"),this.condition=t};s.prototype.__proto__=i.prototype,s.prototype.clone=function(t){var e=new s;return e.condition=this.condition.clone(t,e),e.block=this.block.clone(t,e),e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,e},s.prototype.toJSON=function(){return{__type:"Supports",condition:this.condition,block:this.block,lineno:this.lineno,column:this.column,filename:this.filename}},s.prototype.toString=function(){return"@supports "+this.condition}}),o.register("nodes/member.js",function(t,e,n){var i=n("./node"),s=t.exports=function(t,e){i.call(this),this.left=t,this.right=e};s.prototype.__proto__=i.prototype,s.prototype.clone=function(t){var e=new s;return e.left=this.left.clone(t,e),e.right=this.right.clone(t,e),this.val&&(e.val=this.val.clone(t,e)),e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,e},s.prototype.toJSON=function(){var t={__type:"Member",left:this.left,right:this.right,lineno:this.lineno,column:this.column,filename:this.filename};return this.val&&(t.val=this.val),t},s.prototype.toString=function(){return this.left.toString()+"."+this.right.toString()}}),o.register("nodes/atblock.js",function(t,e,n){var i=n("./node"),s=t.exports=function(){i.call(this)};s.prototype.__defineGetter__("nodes",function(){return this.block.nodes}),s.prototype.__proto__=i.prototype,s.prototype.clone=function(t){var e=new s;return e.block=this.block.clone(t,e),e.lineno=this.lineno,e.column=this.column,e.filename=this.filename,e},s.prototype.toString=function(){return"@block"},s.prototype.toJSON=function(){return{__type:"Atblock",block:this.block,lineno:this.lineno,column:this.column,fileno:this.fileno}}}),o.register("nodes/atrule.js",function(t,e,n){var i=n("./node"),s=t.exports=function(t){i.call(this),this.type=t};s.prototype.__proto__=i.prototype,s.prototype.__defineGetter__("hasOnlyProperties",function(){if(!this.block)return!1;for(var t=this.block.nodes,e=0,n=t.length;e<n;++e){t[e].nodeName;switch(t[e].nodeName){case"property":case"expression":case"comment":continue;default:return!1}}return!0}),s.prototype.clone=function(e){var n=new s(this.type);return this.block&&(n.block=this.block.clone(e,n)),n.segments=this.segments.map(function(t){return t.clone(e,n)}),n.lineno=this.lineno,n.column=this.column,n.filename=this.filename,n},s.prototype.toJSON=function(){var t={__type:"Atrule",type:this.type,segments:this.segments,lineno:this.lineno,column:this.column,filename:this.filename};return this.block&&(t.block=this.block),t},s.prototype.toString=function(){return"@"+this.type},s.prototype.__defineGetter__("hasOutput",function(){return!!this.block&&function e(t){var n=t.nodes;if(n.every(function(t){return"group"==t.nodeName&&t.hasOnlyPlaceholders}))return!1;return n.some(function(t){switch(t.nodeName){case"property":case"literal":case"import":return!0;case"block":return e(t);default:if(t.block)return e(t.block)}})}(this.block)})}),o.register("parser.js",function(t,e,n){var i=n("./lexer"),a=n("./nodes"),s=n("./token"),r=n("./units"),o=n("./errors"),l=["ident","string","selector","function","comment","boolean","space","color","unit","for","in","[","]","(",")","+","-","*","*=","<",">","=",":","&","&&","~","{","}",".","..","/"],c=["matches","not","dir","lang","any-link","link","visited","local-link","target","scope","hover","active","focus","drop","current","past","future","enabled","disabled","read-only","read-write","placeholder-shown","checked","indeterminate","valid","invalid","in-range","out-of-range","required","optional","user-error","root","empty","blank","nth-child","nth-last-child","first-child","last-child","only-child","nth-of-type","nth-last-of-type","first-of-type","last-of-type","only-of-type","nth-match","nth-last-match","nth-column","nth-last-column","first-line","first-letter","before","after","selection"],p=t.exports=function(t,e){var n=this;e=e||{},this.lexer=new i(t,e),this.prefix=e.prefix||"",this.root=e.root||new a.Root,this.state=["root"],this.stash=[],this.parens=0,this.css=0,this.state.pop=function(){n.prevState=[].pop.call(this)}};p.prototype={constructor:p,currentState:function(){return this.state[this.state.length-1]},previousState:function(){return this.state[this.state.length-2]},parse:function(){for(var t=this.parent=this.root;"eos"!=this.peek().type&&(this.skipWhitespace(),"eos"!=this.peek().type);){var e=this.statement();this.accept(";"),e||this.error("unexpected token {peek}, not allowed at the root level"),t.push(e)}return t},error:function(t){var e=this.peek().type,n=null==this.peek().val?"":" "+this.peek().toString();throw n.trim()==e.trim()&&(n=""),new o.ParseError(t.replace("{peek}",'"'+e+n+'"'))},accept:function(t){if(t==this.peek().type)return this.next()},expect:function(t){return t!=this.peek().type&&this.error('expected "'+t+'", got {peek}'),this.next()},next:function(){var t=this.stash.length?this.stash.pop():this.lexer.next(),e=t.lineno,n=t.column||1;return t.val&&t.val.nodeName&&(t.val.lineno=e,t.val.column=n),a.lineno=e,a.column=n,t},peek:function(){return this.lexer.peek()},lookahead:function(t){return this.lexer.lookahead(t)},isSelectorToken:function(t){var e=this.lookahead(t).type;switch(e){case"for":return this.bracketed;case"[":return this.bracketed=!0;case"]":return!(this.bracketed=!1);default:return~l.indexOf(e)}},isPseudoSelector:function(t){var e=this.lookahead(t).val;return e&&~c.indexOf(e.name)},lineContains:function(t){for(var e,n=1;e=this.lookahead(n++);){if(~["indent","outdent","newline","eos"].indexOf(e.type))return;if(t==e.type)return!0}},selectorToken:function(){if(this.isSelectorToken(1)){if("{"==this.peek().type){if(!this.lineContains("}"))return;for(var t,e=0;t=this.lookahead(++e);){if("}"==t.type){if(2==e||3==e&&"space"==this.lookahead(e-1).type)return;break}if(":"==t.type)return}}return this.next()}},skip:function(t){for(;~t.indexOf(this.peek().type);)this.next()},skipWhitespace:function(){this.skip(["space","indent","outdent","newline"])},skipNewlines:function(){for(;"newline"==this.peek().type;)this.next()},skipSpaces:function(){for(;"space"==this.peek().type;)this.next()},skipSpacesAndComments:function(){for(;"space"==this.peek().type||"comment"==this.peek().type;)this.next()},looksLikeFunctionDefinition:function(t){return"indent"==this.lookahead(t).type||"{"==this.lookahead(t).type},looksLikeSelector:function(t){var e,n=1;if(t&&":"==this.lookahead(n+1).type&&(this.lookahead(n+1).space||"indent"==this.lookahead(n+2).type))return!1;for(;"ident"==this.lookahead(n).type&&("newline"==this.lookahead(n+1).type||","==this.lookahead(n+1).type);)n+=2;for(;this.isSelectorToken(n)||","==this.lookahead(n).type;){if("selector"==this.lookahead(n).type)return!0;if("&"==this.lookahead(n+1).type)return!0;if("."==this.lookahead(n).type&&"ident"==this.lookahead(n+1).type)return!0;if("*"==this.lookahead(n).type&&"newline"==this.lookahead(n+1).type)return!0;if(":"==this.lookahead(n).type&&":"==this.lookahead(n+1).type)return!0;if("color"==this.lookahead(n).type&&"newline"==this.lookahead(n-1).type)return!0;if(this.looksLikeAttributeSelector(n))return!0;if(("="==this.lookahead(n).type||"function"==this.lookahead(n).type)&&"{"==this.lookahead(n+1).type)return!1;if(":"==this.lookahead(n).type&&!this.isPseudoSelector(n+1)&&this.lineContains("."))return!1;if("{"==this.lookahead(n).type?e=!0:"}"==this.lookahead(n).type&&(e=!1),e&&":"==this.lookahead(n).type)return!0;if("space"==this.lookahead(n).type&&"{"==this.lookahead(n+1).type)return!0;if(":"==this.lookahead(n++).type&&!this.lookahead(n-1).space&&this.isPseudoSelector(n))return!0;if("space"==this.lookahead(n).type&&"newline"==this.lookahead(n+1).type&&"{"==this.lookahead(n+2).type)return!0;if(","==this.lookahead(n).type&&"newline"==this.lookahead(n+1).type)return!0}if(","==this.lookahead(n).type&&"newline"==this.lookahead(n+1).type)return!0;if("{"==this.lookahead(n).type&&"newline"==this.lookahead(n+1).type)return!0;if(this.css&&(";"==this.lookahead(n).type||"}"==this.lookahead(n-1).type))return!1;for(;!~["indent","outdent","newline","for","if",";","}","eos"].indexOf(this.lookahead(n).type);)++n;return"indent"==this.lookahead(n).type||void 0},looksLikeAttributeSelector:function(t){var e=this.lookahead(t).type;return!("="!=e||!this.bracketed)||("ident"==e||"string"==e)&&"]"==this.lookahead(t+1).type&&("newline"==this.lookahead(t+2).type||this.isSelectorToken(t+2))&&!this.lineContains(":")&&!this.lineContains("=")},looksLikeKeyframe:function(){var t,e=2;switch(this.lookahead(e).type){case"{":case"indent":case",":return!0;case"newline":for(;"unit"==this.lookahead(++e).type||"newline"==this.lookahead(e).type;);return"indent"==(t=this.lookahead(e).type)||"{"==t}},stateAllowsSelector:function(){switch(this.currentState()){case"root":case"atblock":case"selector":case"conditional":case"function":case"atrule":case"for":return!0}},assignAtblock:function(t){try{t.push(this.atblock(t))}catch(t){this.error("invalid right-hand side operand in assignment, got {peek}")}},statement:function(){var t,e,n=this.stmt(),i=this.prevState;switch(this.allowPostfix&&(this.allowPostfix=!1,i="expression"),i){case"assignment":case"expression":case"function arguments":for(;e=this.accept("if")||this.accept("unless")||this.accept("for");)switch(e.type){case"if":case"unless":(n=new a.If(this.expression(),n)).postfix=!0,n.negate="unless"==e.type,this.accept(";");break;case"for":var s,r=this.id().name;this.accept(",")&&(s=this.id().name),this.expect("in");var o=new a.Each(r,s,this.expression());(t=new a.Block(this.parent,o)).push(n),o.block=t,n=o}}return n},stmt:function(){var t=this.peek().type;switch(t){case"keyframes":return this.keyframes();case"-moz-document":return this.mozdocument();case"comment":case"selector":case"extend":case"literal":case"charset":case"namespace":case"require":case"extend":case"media":case"atrule":case"ident":case"scope":case"supports":case"unless":return this[t]();case"function":return this.fun();case"import":return this.atimport();case"if":return this.ifstmt();case"for":return this.forin();case"return":return this.ret();case"{":return this.property();default:if(this.stateAllowsSelector())switch(t){case"color":case"~":case">":case"<":case":":case"&":case"&&":case"[":case".":case"/":return this.selector();case"..":if("/"==this.lookahead(2).type)return this.selector();case"+":return"function"==this.lookahead(2).type?this.functionCall():this.selector();case"*":return this.property();case"unit":if(this.looksLikeKeyframe())return this.selector();case"-":if("{"==this.lookahead(2).type)return this.property()}var e=this.expression();return e.isEmpty&&this.error("unexpected {peek}"),e}},block:function(t,e){var n,i,s,r=this.parent=new a.Block(this.parent,t);for(!1===e&&(r.scope=!1),this.accept("newline"),this.accept("{")?(this.css++,n="}",this.skipWhitespace()):(n="outdent",this.expect("indent"));n!=this.peek().type;){if(this.css){if(this.accept("newline")||this.accept("indent"))continue;i=this.statement(),this.accept(";"),this.skipWhitespace()}else{if(this.accept("newline"))continue;if(s=this.lookahead(2).type,"indent"==this.peek().type&&~["outdent","newline","comment"].indexOf(s)){this.skip(["indent","outdent"]);continue}if("eos"==this.peek().type)return r;i=this.statement(),this.accept(";")}i||this.error("unexpected token {peek} in block"),r.push(i)}return this.css?(this.skipWhitespace(),this.expect("}"),this.skipSpaces(),this.css--):this.expect("outdent"),this.parent=r.parent,r},comment:function(){var t=this.next().val;return this.skipSpaces(),t},forin:function(){this.expect("for");var t,e=this.id().name;this.accept(",")&&(t=this.id().name),this.expect("in"),this.state.push("for"),this.cond=!0;var n=new a.Each(e,t,this.expression());return this.cond=!1,n.block=this.block(n,!1),this.state.pop(),n},ret:function(){this.expect("return");var t=this.expression();return t.isEmpty?new a.Return:new a.Return(t)},unless:function(){this.expect("unless"),this.state.push("conditional"),this.cond=!0;var t=new a.If(this.expression(),!0);return this.cond=!1,t.block=this.block(t,!1),this.state.pop(),t},ifstmt:function(){this.expect("if"),this.state.push("conditional"),this.cond=!0;var t,e,n=new a.If(this.expression());for(this.cond=!1,n.block=this.block(n,!1),this.skip(["newline","comment"]);this.accept("else");){if(!this.accept("if")){n.elses.push(this.block(n,!1));break}this.cond=!0,t=this.expression(),this.cond=!1,e=this.block(n,!1),n.elses.push(new a.If(t,e)),this.skip(["newline","comment"])}return this.state.pop(),n},atblock:function(t){return t||this.expect("atblock"),t=new a.Atblock,this.state.push("atblock"),t.block=this.block(t,!1),this.state.pop(),t},atrule:function(){var t,e=this.expect("atrule").val,n=new a.Atrule(e);return this.skipSpacesAndComments(),n.segments=this.selectorParts(),this.skipSpacesAndComments(),("indent"==(t=this.peek().type)||"{"==t||"newline"==t&&"{"==this.lookahead(2).type)&&(this.state.push("atrule"),n.block=this.block(n),this.state.pop()),n},scope:function(){this.expect("scope");var t=this.selectorParts().map(function(t){return t.val}).join("");return this.selectorScope=t.trim(),a.nil},supports:function(){this.expect("supports");var t=new a.Supports(this.supportsCondition());return this.state.push("atrule"),t.block=this.block(t),this.state.pop(),t},supportsCondition:function(){var t=this.supportsNegation()||this.supportsOp();return t||(this.cond=!0,t=this.expression(),this.cond=!1),t},supportsNegation:function(){if(this.accept("not")){var t=new a.Expression;return t.push(new a.Literal("not")),t.push(this.supportsFeature()),t}},supportsOp:function(){var t,e,n=this.supportsFeature();if(n){for((e=new a.Expression).push(n);t=this.accept("&&")||this.accept("||");)e.push(new a.Literal("&&"==t.val?"and":"or")),e.push(this.supportsFeature());return e}},supportsFeature:function(){if(this.skipSpacesAndComments(),"("==this.peek().type){var t=this.lookahead(2).type;if("ident"==t||"{"==t)return this.feature();this.expect("(");var e=new a.Expression;return e.push(new a.Literal("(")),e.push(this.supportsCondition()),this.expect(")"),e.push(new a.Literal(")")),this.skipSpacesAndComments(),e}},extend:function(){for(var t,e,n,i=this.expect("extend"),s=[];(n=this.selectorParts()).length&&(t=new a.Selector(n),s.push(t),"!"===this.peek().type&&"ident"===(i=this.lookahead(2)).type&&"optional"===i.val.name&&(this.skip(["!","ident"]),t.optional=!0)),this.accept(","););return(e=new a.Extend(s)).lineno=i.lineno,e.column=i.column,e},media:function(){this.expect("media"),this.state.push("atrule");var t=new a.Media(this.queries());return t.block=this.block(t),this.state.pop(),t},queries:function(){for(var t=new a.QueryList,e=["comment","newline","space"];this.skip(e),t.push(this.query()),this.skip(e),this.accept(","););return t},query:function(){var t,e,n,i=new a.Query;if("ident"==this.peek().type&&("."==this.lookahead(2).type||"["==this.lookahead(2).type))return this.cond=!0,t=this.expression(),this.cond=!1,i.push(new a.Feature(t.nodes)),i;if((e=this.accept("ident")||this.accept("not"))&&(e=new a.Literal(e.val.string||e.val),this.skipSpacesAndComments(),(n=this.accept("ident"))?(i.type=n.val,i.predicate=e):i.type=e,this.skipSpacesAndComments(),!this.accept("&&")))return i;for(;i.push(this.feature()),this.accept("&&"););return i},feature:function(){this.skipSpacesAndComments(),this.expect("("),this.skipSpacesAndComments();var t=new a.Feature(this.interpolate());return this.skipSpacesAndComments(),this.accept(":"),this.skipSpacesAndComments(),this.inProperty=!0,t.expr=this.list(),this.inProperty=!1,this.skipSpacesAndComments(),this.expect(")"),this.skipSpacesAndComments(),t},mozdocument:function(){this.expect("-moz-document");for(var t=new a.Atrule("-moz-document"),e=[];this.skipSpacesAndComments(),e.push(this.functionCall()),this.skipSpacesAndComments(),this.accept(","););return t.segments=[new a.Literal(e.join(", "))],this.state.push("atrule"),t.block=this.block(t,!1),this.state.pop(),t},atimport:function(){return this.expect("import"),this.allowPostfix=!0,new a.Import(this.expression(),!1)},require:function(){return this.expect("require"),this.allowPostfix=!0,new a.Import(this.expression(),!0)},charset:function(){this.expect("charset");var t=this.expect("string").val;return this.allowPostfix=!0,new a.Charset(t)},namespace:function(){var t,e;return this.expect("namespace"),this.skipSpacesAndComments(),(e=this.accept("ident"))&&(e=e.val),this.skipSpacesAndComments(),t=this.accept("string")||this.url(),this.allowPostfix=!0,new a.Namespace(t,e)},keyframes:function(){var t,e=this.expect("keyframes");return this.skipSpacesAndComments(),t=new a.Keyframes(this.selectorParts(),e.val),this.skipSpacesAndComments(),this.state.push("atrule"),t.block=this.block(t),this.state.pop(),t},literal:function(){return this.expect("literal").val},id:function(){var t=this.expect("ident");return this.accept("space"),t.val},ident:function(){for(var t=2,e=this.lookahead(t).type;"space"==e;)e=this.lookahead(++t).type;switch(e){case"=":case"?=":case"-=":case"+=":case"*=":case"/=":case"%=":return this.assignment();case".":if("space"==this.lookahead(t-1).type)return this.selector();if(this._ident==this.peek())return this.id();for(;"="!=this.lookahead(++t).type&&!~["[",",","newline","indent","eos"].indexOf(this.lookahead(t).type););if("="==this.lookahead(t).type)return this._ident=this.peek(),this.expression();if(this.looksLikeSelector()&&this.stateAllowsSelector())return this.selector();case"[":if(this._ident==this.peek())return this.id();for(;"]"!=this.lookahead(t++).type&&"selector"!=this.lookahead(t).type&&"eos"!=this.lookahead(t).type;);if("="==this.lookahead(t).type)return this._ident=this.peek(),this.expression();if(this.looksLikeSelector()&&this.stateAllowsSelector())return this.selector();case"-":case"+":case"/":case"*":case"%":case"**":case"&&":case"||":case">":case"<":case">=":case"<=":case"!=":case"==":case"?":case"in":case"is a":case"is defined":if(this._ident==this.peek())return this.id();switch(this._ident=this.peek(),this.currentState()){case"for":case"selector":return this.property();case"root":case"atblock":case"atrule":return"["==e?this.subscript():this.selector();case"function":case"conditional":return this.looksLikeSelector()?this.selector():this.expression();default:return this.operand?this.id():this.expression()}default:switch(this.currentState()){case"root":return this.selector();case"for":case"selector":case"function":case"conditional":case"atblock":case"atrule":return this.property();default:var n=this.id();return"interpolation"==this.previousState()&&(n.mixin=!0),n}}},interpolate:function(){var t,e=[];for(this.accept("*")&&e.push(new a.Literal("*"));;)if(this.accept("{"))this.state.push("interpolation"),e.push(this.expression()),this.expect("}"),this.state.pop();else if(t=this.accept("-"))e.push(new a.Literal("-"));else{if(!(t=this.accept("ident")))break;e.push(t.val)}return e.length||this.expect("ident"),e},property:function(){if(this.looksLikeSelector(!0))return this.selector();var t=this.interpolate(),e=new a.Property(t),n=e;return this.accept("space"),this.accept(":")&&this.accept("space"),this.state.push("property"),this.inProperty=!0,e.expr=this.list(),e.expr.isEmpty&&(n=t[0]),this.inProperty=!1,this.allowPostfix=!0,this.state.pop(),this.accept(";"),n},selector:function(){for(var t,e,n=new a.Group,i=this.selectorScope,s="root"==this.currentState();this.accept("newline"),t=this.selectorParts(),s&&i&&t.unshift(new a.Literal(i+" ")),t.length&&((e=new a.Selector(t)).lineno=t[0].lineno,e.column=t[0].column,n.push(e)),this.accept(",")||this.accept("newline"););return"selector-parts"==this.currentState()?n.nodes:(this.state.push("selector"),n.block=this.block(n),this.state.pop(),n)},selectorParts:function(){for(var t,e=[];t=this.selectorToken();)switch(t.type){case"{":this.skipSpaces();var n=this.expression();this.skipSpaces(),this.expect("}"),e.push(n);break;case this.prefix&&".":var i=new a.Literal(t.val+this.prefix);i.prefixed=!0,e.push(i);break;case"comment":break;case"color":case"unit":e.push(new a.Literal(t.val.raw));break;case"space":e.push(new a.Literal(" "));break;case"function":e.push(new a.Literal(t.val.name+"("));break;case"ident":e.push(new a.Literal(t.val.name||t.val.string));break;default:e.push(new a.Literal(t.val)),t.space&&e.push(new a.Literal(" "))}return e},assignment:function(){var t,e,n=this.id().name;if(t=this.accept("=")||this.accept("?=")||this.accept("+=")||this.accept("-=")||this.accept("*=")||this.accept("/=")||this.accept("%=")){this.state.push("assignment");var i=this.list();switch(i.isEmpty&&this.assignAtblock(i),e=new a.Ident(n,i),this.state.pop(),t.type){case"?=":var s=new a.BinOp("is defined",e),r=new a.Ident(n);e=new a.Ternary(s,r,e);break;case"+=":case"-=":case"*=":case"/=":case"%=":e.val=new a.BinOp(t.type[0],new a.Ident(n),i)}}return e},fun:function(){var t,e=1,n=2;t:for(;t=this.lookahead(n++);)switch(t.type){case"function":case"(":++e;break;case")":if(!--e)break t;break;case"eos":this.error('failed to find closing paren ")"')}switch(this.currentState()){case"expression":return this.functionCall();default:return this.looksLikeFunctionDefinition(n)?this.functionDefinition():this.expression()}},url:function(){this.expect("function"),this.state.push("function arguments");var t=this.args();return this.expect(")"),this.state.pop(),new a.Call("url",t)},functionCall:function(){var t=this.accept("+");if("url"==this.peek().val.name)return this.url();var e=this.expect("function").val.name;this.state.push("function arguments"),this.parens++;var n=this.args();this.expect(")"),this.parens--,this.state.pop();var i=new a.Call(e,n);return t&&(this.state.push("function"),i.block=this.block(i),this.state.pop()),i},functionDefinition:function(){var t=this.expect("function").val.name;this.state.push("function params"),this.skipWhitespace();var e=this.params();this.skipWhitespace(),this.expect(")"),this.state.pop(),this.state.push("function");var n=new a.Function(t,e);return n.block=this.block(n),this.state.pop(),new a.Ident(t,n)},params:function(){for(var t,e,n=new a.Params;t=this.accept("ident");)this.accept("space"),n.push(e=t.val),this.accept("...")?e.rest=!0:this.accept("=")&&(e.val=this.expression()),this.skipWhitespace(),this.accept(","),this.skipWhitespace();return n},args:function(){for(var t,e=new a.Arguments;"ident"==this.peek().type&&":"==this.lookahead(2).type?(t=this.next().val.string,this.expect(":"),e.map[t]=this.expression()):e.push(this.expression()),this.accept(","););return e},list:function(){for(var t=this.expression();this.accept(",");)if(t.isList)e.push(this.expression());else{var e=new a.Expression(!0);e.push(t),e.push(this.expression()),t=e}return t},expression:function(){var t,e=new a.Expression;for(this.state.push("expression");t=this.negation();)t||this.error("unexpected token {peek} in expression"),e.push(t);return this.state.pop(),e.nodes.length&&(e.lineno=e.nodes[0].lineno,e.column=e.nodes[0].column),e},negation:function(){return this.accept("not")?new a.UnaryOp("!",this.negation()):this.ternary()},ternary:function(){var t=this.logical();if(this.accept("?")){var e=this.expression();this.expect(":");var n=this.expression();t=new a.Ternary(t,e,n)}return t},logical:function(){for(var t,e=this.typecheck();t=this.accept("&&")||this.accept("||");)e=new a.BinOp(t.type,e,this.typecheck());return e},typecheck:function(){for(var t,e=this.equality();t=this.accept("is a");)this.operand=!0,e||this.error('illegal unary "'+t+'", missing left-hand operand'),e=new a.BinOp(t.type,e,this.equality()),this.operand=!1;return e},equality:function(){for(var t,e=this.inop();t=this.accept("==")||this.accept("!=");)this.operand=!0,e||this.error('illegal unary "'+t+'", missing left-hand operand'),e=new a.BinOp(t.type,e,this.inop()),this.operand=!1;return e},inop:function(){for(var t=this.relational();this.accept("in");)this.operand=!0,t||this.error('illegal unary "in", missing left-hand operand'),t=new a.BinOp("in",t,this.relational()),this.operand=!1;return t},relational:function(){for(var t,e=this.range();t=this.accept(">=")||this.accept("<=")||this.accept("<")||this.accept(">");)this.operand=!0,e||this.error('illegal unary "'+t+'", missing left-hand operand'),e=new a.BinOp(t.type,e,this.range()),this.operand=!1;return e},range:function(){var t,e=this.additive();return(t=this.accept("...")||this.accept(".."))&&(this.operand=!0,e||this.error('illegal unary "'+t+'", missing left-hand operand'),e=new a.BinOp(t.val,e,this.additive()),this.operand=!1),e},additive:function(){for(var t,e=this.multiplicative();t=this.accept("+")||this.accept("-");)this.operand=!0,e=new a.BinOp(t.type,e,this.multiplicative()),this.operand=!1;return e},multiplicative:function(){for(var t,e=this.defined();t=this.accept("**")||this.accept("*")||this.accept("/")||this.accept("%");){if(this.operand=!0,"/"==t&&this.inProperty&&!this.parens)return this.stash.push(new s("literal",new a.Literal("/"))),this.operand=!1,e;e||this.error('illegal unary "'+t+'", missing left-hand operand'),e=new a.BinOp(t.type,e,this.defined()),this.operand=!1}return e},defined:function(){var t=this.unary();return this.accept("is defined")&&(t||this.error('illegal unary "is defined", missing left-hand operand'),t=new a.BinOp("is defined",t)),t},unary:function(){var t,e;return(t=this.accept("!")||this.accept("~")||this.accept("+")||this.accept("-"))?(this.operand=!0,(e=this.unary())||this.error('illegal unary "'+t+'"'),e=new a.UnaryOp(t.type,e),this.operand=!1,e):this.subscript()},subscript:function(){for(var t=this.member();this.accept("[");)t=new a.BinOp("[]",t,this.expression()),this.expect("]");return this.accept("=")&&(t.op+="=",t.val=this.list(),t.val.isEmpty&&this.assignAtblock(t.val)),t},member:function(){var t=this.primary();if(t){for(;this.accept(".");){var e=new a.Ident(this.expect("ident").val.string);t=new a.Member(t,e)}this.skipSpaces(),this.accept("=")&&(t.val=this.list(),t.val.isEmpty&&this.assignAtblock(t.val))}return t},object:function(){var t,e,n,i=new a.Object;for(this.expect("{"),this.skipWhitespace();!this.accept("}");)this.accept("comment")||this.accept("newline")||(n||this.accept(","),(t=this.accept("ident")||this.accept("string"))||this.error('expected "ident" or "string", got {peek}'),t=t.val.hash,this.skipSpacesAndComments(),this.expect(":"),e=this.expression(),i.set(t,e),n=this.accept(","),this.skipWhitespace());return i},primary:function(){var t;if(this.skipSpaces(),this.accept("(")){++this.parens;var e=this.expression(),n=this.expect(")");return--this.parens,this.accept("%")&&e.push(new a.Ident("%")),t=this.peek(),!n.space&&"ident"==t.type&&~r.indexOf(t.val.string)&&(e.push(new a.Ident(t.val.string)),this.next()),e}switch((t=this.peek()).type){case"null":case"unit":case"color":case"string":case"literal":case"boolean":case"comment":return this.next().val;case!this.cond&&"{":return this.object();case"atblock":return this.atblock();case"atrule":var i=new a.Ident(this.next().val);return i.property=!0,i;case"ident":return this.ident();case"function":return t.anonymous?this.functionDefinition():this.functionCall()}}}}),o.register("renderer.js",function(t,e,l){var c=l("./parser"),n=l("./visitor/evaluator"),p=l("./visitor/normalizer"),u=l("./utils"),h=l("./nodes");l("./path").join;function i(t,e){(e=e||{}).globals=e.globals||{},e.functions=e.functions||{},e.use=e.use||[],e.use=Array.isArray(e.use)?e.use:[e.use],e.imports=[],e.paths=e.paths||[],e.filename=e.filename||"stylus",e.Evaluator=e.Evaluator||n,this.options=e,this.str=t}(t.exports=i).prototype.render=function(e){for(var n=this.parser=new c(this.str,this.options),t=0,i=this.options.use.length;t<i;t++)this.use(this.options.use[t]);try{h.filename=this.options.filename;var s=n.parse();this.evaluator=new this.options.Evaluator(s,this.options),this.nodes=h,s=(this.evaluator.renderer=this).evaluator.evaluate(),s=new p(s,this.options).normalize();var r=this.options.sourcemap?new(l("./visitor/sourcemapper"))(s,this.options):new(l("./visitor/compiler"))(s,this.options),o=r.compile();this.options.sourcemap&&(this.sourcemap=r.map.toJSON())}catch(t){var a={};if(a.input=t.input||this.str,a.filename=t.filename||this.options.filename,a.lineno=t.lineno||n.lexer.lineno,a.column=t.column||n.lexer.column,!e)throw u.formatException(t,a);return e(u.formatException(t,a))}if(!e)return o;e(null,o)},i.prototype.deps=function(t){t&&(this.options.filename=t);var e=l("./visitor/deps-resolver"),n=new c(this.str,this.options);try{return h.filename=this.options.filename,new e(n.parse(),this.options).resolve()}catch(t){var i={};throw i.input=t.input||this.str,i.filename=t.filename||this.options.filename,i.lineno=t.lineno||n.lexer.lineno,i.column=t.column||n.lexer.column,u.formatException(t,i)}},i.prototype.set=function(t,e){return this.options[t]=e,this},i.prototype.get=function(t){return this.options[t]},i.prototype.include=function(t){return this.options.paths.push(t),this},i.prototype.use=function(t){return t.call(this,this),this},i.prototype.define=function(t,e,n){return(e=u.coerce(e,n)).nodeName?this.options.globals[t]=e:(this.options.functions[t]=e,null!=n&&(e.raw=n)),this}}),o.register("selector-parser.js",function(t,e,n){var i=[">","+","~"],r=t.exports=function(t,e,n){this.str=t,this.stack=e||[],this.parts=n||[],this.pos=0,this.level=2,this.nested=!0,this.ignore=!1};r.prototype.skip=function(t){this.str=this.str.substr(t),this.pos+=t},r.prototype.skipSpaces=function(){for(;" "==this.str[0];)this.skip(1)},r.prototype.advance=function(){return this.root()||this.relative()||this.escaped()||this.parent()||this.partial()||this.char()},r.prototype.root=function(){this.pos||"/"!=this.str[0]||"deep"==this.str.slice(1,5)||(this.nested=!1,this.skip(1))},r.prototype.relative=function(t){if((!this.pos||t)&&"../"==this.str.slice(0,3)){for(this.nested=!1,this.skip(3);this.relative(!0);)this.level++;if(!this.raw){var e=this.stack[this.stack.length-this.level];if(e)return e;this.ignore=!0}}},r.prototype.escaped=function(){if("\\"==this.str[0]){var t=this.str[1];if("&"==t||"^"==t)return this.skip(2),t}},r.prototype.parent=function(){if("&"==this.str[0]){if(!this.pos&&(!this.stack.length||this.raw)){for(var t=0;" "==this.str[++t];);if(~i.indexOf(this.str[t]))return void this.skip(t+1)}if(this.nested=!1,this.skip(1),!this.raw)return this.stack[this.stack.length-1]}},r.prototype.partial=function(){if("^"==this.str[0]&&"["==this.str[1]){this.skip(2),this.skipSpaces();var t=this.range();if(this.skipSpaces(),"]"!=this.str[0])return"^[";if(this.nested=!1,this.skip(1),t)return t;this.ignore=!0}},r.prototype.number=function(){var t=0,e="";for("-"==this.str[t]&&(e+=this.str[t++]);48<=this.str.charCodeAt(t)&&this.str.charCodeAt(t)<=57;)e+=this.str[t++];if(e)return this.skip(t),Number(e)},r.prototype.range=function(){var t,e=this.number();if(".."==this.str.slice(0,2)){this.skip(2);var n=this.number(),i=this.parts.length;if(e<0&&(e=i+e-1),n<0&&(n=i+n-1),n<e){var s=e;e=n,n=s}n<i-1&&(t=this.parts.slice(e,n+1).map(function(t){var e=new r(t,this.stack,this.parts);return e.raw=!0,e.parse().val.trim()},this).join(" "))}else t=this.stack[e<0?this.stack.length+e-1:e];if(t)return t;this.ignore=!0},r.prototype.char=function(){var t=this.str[0];return this.skip(1),t},r.prototype.parse=function(){for(var t="";this.str.length;)if(t+=this.advance()||"",this.ignore){t="";break}return{val:t.trimRight(),nested:this.nested}}}),o.register("stack/index.js",function(t,e,n){var i=t.exports=function(){Array.apply(this,arguments)};i.prototype.__proto__=Array.prototype,i.prototype.push=function(t){return t.stack=this,t.parent=this.currentFrame,[].push.apply(this,arguments)},i.prototype.__defineGetter__("currentFrame",function(){return this[this.length-1]}),i.prototype.getBlockFrame=function(t){for(var e=0;e<this.length;++e)if(t==this[e].block)return this[e]},i.prototype.lookup=function(t){var e,n=this.currentFrame.block;do{var i=this.getBlockFrame(n);if(i&&(e=i.lookup(t)))return e}while(n=n.parent)},i.prototype.inspect=function(){return this.reverse().map(function(t){return t.inspect()}).join("\n")},i.prototype.toString=function(){for(var t,e,n=[],i=this.length;i--;)if(t=this[i].block.node)switch(e="("+t.filename+":"+(t.lineno+1)+":"+t.column+")",t.nodeName){case"function":n.push("    at "+t.name+"() "+e);break;case"group":n.push('    at "'+t.nodes[0].val+'" '+e)}return n.join("\n")}}),o.register("stack/frame.js",function(t,e,n){var i=n("./scope"),s=t.exports=function(t){this._scope=!1===t.scope?null:new i,this.block=t};s.prototype.__defineGetter__("scope",function(){return this._scope||this.parent.scope}),s.prototype.lookup=function(t){return this.scope.lookup(t)},s.prototype.inspect=function(){return"[Frame "+(!1===this.block.scope?"scope-less":this.scope.inspect())+"]"}}),o.register("stack/scope.js",function(t,e,n){var i=t.exports=function(){this.locals={}};i.prototype.add=function(t){this.locals[t.name]=t.val},i.prototype.lookup=function(t){return this.locals[t]},i.prototype.inspect=function(){var t=Object.keys(this.locals).map(function(t){return"@"+t});return"[Scope"+(t.length?" "+t.join(", "):"")+"]"}}),o.register("stylus.js",function(t,e,n){var i=n("./renderer"),s=n("./nodes");n("./utils");(e=t.exports=function(t,e){t=r+t;return new i(t,e)}).version="0.53.0",e.nodes=s,e.functions=n("./functions"),e.utils=n("./utils"),e.Visitor=n("./visitor"),e.Parser=n("./parser"),e.Evaluator=n("./visitor/evaluator"),e.Normalizer=n("./visitor/normalizer"),e.Compiler=n("./visitor/compiler"),e.render=function(t,e,n){return"function"==typeof e&&(n=e,e={}),new i(t=r+t,e).render(n)},e.url=n("./functions/url")}),o.register("token.js",function(t,e,n){var i=t.exports=function(t,e){this.type=t,this.val=e};i.prototype.inspect=function(){var t=" "+this.val;return"[Token:"+this.lineno+":"+this.column+" [32m"+this.type+"[0m[33m"+(this.val?t:"")+"[0m]"},i.prototype.toString=function(){return(void 0===this.val?this.type:this.val).toString()}}),o.register("utils.js",function(t,p,u){var r=u("./nodes"),a=u("./path").join,e=u("./path").isAbsolute;p.absolute=e||function(t){return"\\\\"==t.substr(0,2)||"/"===t.charAt(0)||/^[a-z]:[\\\/]/i.test(t)},p.lookup=function(t,e,n){var i,s=e.length;if(p.absolute(t))try{return t}catch(t){}for(;s--;)try{if(n==(i=a(e[s],t)))continue;return i}catch(t){}},p.find=function(t,e,n){var i,s,r=e.length;if(p.absolute(t)&&(s=glob.sync(t)).length)return s;for(;r--;)if(n!=(i=a(e[r],t))&&(s=glob.sync(i)).length)return s},p.lookupIndex=function(t,s,r){var o=p.find(a(t,"index.styl"),s,r);return o||(o=p.find(a(t,basename(t).replace(/\.styl/i,"")+".styl"),s,r)),o||~t.indexOf("node_modules")||(o=function t(e){var n=p.lookup(a(e,"package.json"),s,r);if(!n)return/\.styl$/i.test(e)?p.lookupIndex(e,s,r):t(e+".styl");var i=u(relative(__dirname,n)).main;o=i?p.find(a(e,i),s,r):p.lookupIndex(e,s,r);return o}(a("node_modules",t))),o},p.formatException=function(t,e){var i=e.lineno,s=e.column,n=e.filename,r=e.input,o=(o=e.context||8)/2,a=("\n"+r).split("\n"),l=Math.max(i-o,1),c=Math.min(a.length,i+o),p=c.toString().length;o=a.slice(l,c).map(function(t,e){var n=e+l;return"   "+Array(p-n.toString().length+1).join(" ")+n+"| "+t+(n==i?"\n"+Array(n.toString().length+5+s).join("-")+"^":"")}).join("\n");return t.message=n+":"+i+":"+s+"\n"+o+"\n\n"+t.message+"\n"+(t.stylusStack?t.stylusStack+"\n":""),t.fromStylus&&(t.stack="Error: "+t.message),t},p.assertType=function(t,e,n){if(p.assertPresent(t,n),t.nodeName!=e){var i=t.nodeName;throw new Error("TypeError: "+("expected "+(n?'"'+n+'" to be a ':"")+e+", but got "+i+":"+t))}},p.assertString=function(t,e){switch(p.assertPresent(t,e),t.nodeName){case"string":case"ident":case"literal":return;default:var n=t.nodeName;throw new Error("TypeError: "+("expected string, ident or literal, but got "+n+":"+t))}},p.assertColor=function(t,e){switch(p.assertPresent(t,e),t.nodeName){case"rgba":case"hsla":return;default:var n=t.nodeName;throw new Error("TypeError: "+("expected rgba or hsla, but got "+n+":"+t))}},p.assertPresent=function(t,e){if(!t){if(e)throw new Error('"'+e+'" argument required');throw new Error("argument missing")}},p.unwrap=function(t){return t.preserve?t:"arguments"!=t.nodeName&&"expression"!=t.nodeName?t:1!=t.nodes.length?t:"arguments"!=t.nodes[0].nodeName&&"expression"!=t.nodes[0].nodeName?t:p.unwrap(t.nodes[0])},p.coerce=function(t,e){switch(typeof t){case"function":return t;case"string":return new r.String(t);case"boolean":return new r.Boolean(t);case"number":return new r.Unit(t);default:return null==t?r.nil:Array.isArray(t)?p.coerceArray(t,e):t.nodeName?t:p.coerceObject(t,e)}},p.coerceArray=function(t,e){var n=new r.Expression;return t.forEach(function(t){n.push(p.coerce(t,e))}),n},p.coerceObject=function(t,e){var n,i=e?new r.Object:new r.Expression;for(var s in t)n=p.coerce(t[s],e),s=new r.Ident(s),e?i.set(s,n):i.push(p.coerceArray([s,n]));return i},p.params=function(t){return t.toString().match(/\(([^)]*)\)/)[1].split(/ *, */)},p.merge=function(t,e,n){for(var i in e)if(n&&t[i]){var s=p.unwrap(t[i]).first,r=p.unwrap(e[i]).first;"object"==s.nodeName&&"object"==r.nodeName?t[i].first.vals=p.merge(s.vals,r.vals,n):t[i]=e[i]}else t[i]=e[i];return t},p.uniq=function(t){for(var e={},n=[],i=0,s=t.length;i<s;++i)t[i]in e||(e[t[i]]=!0,n.push(t[i]));return n},p.compileSelectors=function(t,s){var r=[],a=u("./selector-parser"),o=this.indent||"",l=[];function c(t,e){var n=[t.val],i=new a(n[0],s,n).parse().val,s=[];if(e.length)for(var r=0,o=e.length;r<o;++r)n.push(e[r]),s.push(i),child=new a(e[r],s,n).parse(),child.nested?i+=" "+child.val:i=child.val;return i.trim()}return function e(n,i){i?n[i].forEach(function(t){!s&&t.isPlaceholder||(t.inherits?(l.unshift(t.val),e(n,i-1),l.shift()):r.push(o+c(t,l)))}):n[0].forEach(function(t){if(s||!t.isPlaceholder){var e=c(t,l);e&&r.push(o+e)}})}(t,t.length-1),p.uniq(r)},p.parseString=function(e){var t,n,i=u("./parser");try{(t=new i(e)).state.push("expression"),(n=new r.Expression).nodes=t.parse().nodes}catch(t){n=new r.Literal(e)}return n}}),o.register("visitor/index.js",function(t,e,n){(t.exports=function(t){this.root=t}).prototype.visit=function(t,e){var n="visit"+t.constructor.name;return this[n]?this[n](t):t}}),o.register("visitor/compiler.js",function(t,e,n){var i=n("./index"),l=n("../utils"),s=t.exports=function(t,e){e=e||{},this.compress=e.compress,this.firebug=e.firebug,this.linenos=e.linenos,this.spaces=e["indent spaces"]||2,this.includeCSS=e["include css"],this.indents=1,i.call(this,t),this.stack=[]};s.prototype.__proto__=i.prototype,s.prototype.compile=function(){return this.visit(this.root)},s.prototype.out=function(t,e){return t},s.prototype.__defineGetter__("indent",function(){return this.compress?"":new Array(this.indents).join(Array(this.spaces+1).join(" "))}),s.prototype.needBrackets=function(t){return 1==this.indents||"atrule"!=t.nodeName||t.hasOnlyProperties},s.prototype.visitRoot=function(t){this.buf="";for(var e=0,n=t.nodes.length;e<n;++e){var i=t.nodes[e];(this.linenos||this.firebug)&&this.debugInfo(i);var s=this.visit(i);s&&(this.buf+=this.out(s+"\n",i))}return this.buf},s.prototype.visitBlock=function(t){var e,n,i=this.compress?"":"\n";if(t.hasProperties&&!t.lacksRenderedSelectors){(n=this.needBrackets(t.node))&&(this.buf+=this.out(this.compress?"{":" {\n"),++this.indents);for(var s=0,r=t.nodes.length;s<r;++s)switch(this.last=r-1==s,(e=t.nodes[s]).nodeName){case"null":case"expression":case"function":case"group":case"block":case"unit":case"media":case"keyframes":case"atrule":case"supports":continue;case!this.compress&&e.inline&&"comment":this.buf=this.buf.slice(0,-1),this.buf+=this.out(" "+this.visit(e)+"\n",e);break;case"property":var o=this.visit(e)+i;this.buf+=this.compress?o:this.out(o,e);break;default:this.buf+=this.out(this.visit(e)+i,e)}n&&(--this.indents,this.buf+=this.out(this.indent+"}"+i))}for(s=0,r=t.nodes.length;s<r;++s)switch((e=t.nodes[s]).nodeName){case"group":case"block":case"keyframes":(this.linenos||this.firebug)&&this.debugInfo(e),this.visit(e);break;case"media":case"import":case"atrule":case"supports":this.visit(e);break;case"comment":e.suppress||(this.buf+=this.out(this.indent+this.visit(e)+"\n",e));break;case"charset":case"literal":case"namespace":this.buf+=this.out(this.visit(e)+"\n",e)}},s.prototype.visitKeyframes=function(t){if(t.frames){var e="official"==t.prefix?"":"-"+t.prefix+"-";this.buf+=this.out("@"+e+"keyframes "+this.visit(t.val)+(this.compress?"{":" {\n"),t),this.keyframe=!0,++this.indents,this.visit(t.block),--this.indents,this.keyframe=!1,this.buf+=this.out("}"+(this.compress?"":"\n"))}},s.prototype.visitMedia=function(t){var e=t.val;t.hasOutput&&e.nodes.length&&(this.buf+=this.out("@media ",t),this.visit(e),this.buf+=this.out(this.compress?"{":" {\n"),++this.indents,this.visit(t.block),--this.indents,this.buf+=this.out("}"+(this.compress?"":"\n")))},s.prototype.visitQueryList=function(t){for(var e=0,n=t.nodes.length;e<n;++e)this.visit(t.nodes[e]),n-1!=e&&(this.buf+=this.out(","+(this.compress?"":" ")))},s.prototype.visitQuery=function(t){var e=t.nodes.length;t.predicate&&(this.buf+=this.out(t.predicate+" ")),t.type&&(this.buf+=this.out(t.type+(e?" and ":"")));for(var n=0;n<e;++n)this.buf+=this.out(this.visit(t.nodes[n])),e-1!=n&&(this.buf+=this.out(" and "))},s.prototype.visitFeature=function(t){return t.expr?t.expr.isEmpty?"("+t.name+")":"("+t.name+":"+(this.compress?"":" ")+this.visit(t.expr)+")":t.name},s.prototype.visitImport=function(t){this.buf+=this.out("@import "+this.visit(t.path)+";\n",t)},s.prototype.visitAtrule=function(t){var e=this.compress?"":"\n";this.buf+=this.out(this.indent+"@"+t.type,t),t.val&&(this.buf+=this.out(" "+t.val.trim())),t.block?t.hasOnlyProperties?this.visit(t.block):(this.buf+=this.out(this.compress?"{":" {\n"),++this.indents,this.visit(t.block),--this.indents,this.buf+=this.out(this.indent+"}"+e)):this.buf+=this.out(";"+e)},s.prototype.visitSupports=function(t){t.hasOutput&&(this.buf+=this.out(this.indent+"@supports ",t),this.isCondition=!0,this.buf+=this.out(this.visit(t.condition)),this.isCondition=!1,this.buf+=this.out(this.compress?"{":" {\n"),++this.indents,this.visit(t.block),--this.indents,this.buf+=this.out(this.indent+"}"+(this.compress?"":"\n")))},s.prototype.visitComment=function(t){return this.compress&&t.suppress?"":t.str},s.prototype.visitFunction=function(t){return t.name},s.prototype.visitCharset=function(t){return"@charset "+this.visit(t.val)+";"},s.prototype.visitNamespace=function(t){return"@namespace "+(t.prefix?this.visit(t.prefix)+" ":"")+this.visit(t.val)+";"},s.prototype.visitLiteral=function(t){var e=t.val;return t.css&&(e=e.replace(/^  /gm,"")),e},s.prototype.visitBoolean=function(t){return t.toString()},s.prototype.visitRGBA=function(t){return t.toString()},s.prototype.visitHSLA=function(t){return t.rgba.toString()},s.prototype.visitUnit=function(t){var e=t.type||"",n=t.val,i=n!=(0|n);if(this.compress){if("%"!=e&&"s"!=e&&"ms"!=e&&0==n)return"0";if(i&&n<1&&-1<n)return n.toString().replace("0.",".")+e}return(i?parseFloat(n.toFixed(15)):n).toString()+e},s.prototype.visitGroup=function(t){var e=this.keyframe?[]:this.stack,n=this.compress?",":",\n";if(e.push(t.nodes),t.block.hasProperties){var i=l.compileSelectors.call(this,e),s=i.length;if(s){this.keyframe&&(n=this.compress?",":", ");for(var r=0;r<s;++r){var o=i[r],a=r==s-1;this.keyframe&&(o=r?o.trim():o),this.buf+=this.out(o+(a?"":n),t.nodes[r])}}else t.block.lacksRenderedSelectors=!0}this.visit(t.block),e.pop()},s.prototype.visitIdent=function(t){return t.name},s.prototype.visitString=function(t){return this.isURL?t.val:t.toString()},s.prototype.visitNull=function(t){return""},s.prototype.visitCall=function(t){this.isURL="url"==t.name;var e=t.args.nodes.map(function(t){return this.visit(t)},this).join(this.compress?",":", ");return this.isURL&&(e='"'+e+'"'),this.isURL=!1,t.name+"("+e+")"},s.prototype.visitExpression=function(s){var r=[],o=this,a=s.nodes.length,l=s.nodes.map(function(t){return o.visit(t)});return l.forEach(function(t,e){var n=e==a-1;if(r.push(t),"/"!=l[e+1]&&"/"!=t&&!n){var i=o.isURL||o.isCondition&&(")"==l[e+1]||"("==t)?"":" ";r.push(s.isList?o.compress?",":", ":i)}}),r.join("")},s.prototype.visitArguments=s.prototype.visitExpression,s.prototype.visitProperty=function(t){var e=this.visit(t.expr).trim(),n=t.name||t.segments.join(""),i=[];return i.push(this.out(this.indent),this.out(n+(this.compress?":":": "),t),this.out(e,t.expr),this.out(this.compress&&this.last?"":";")),i.join("")},s.prototype.debugInfo=function(t){var e="stdin"==t.filename?"stdin":fs.realpathSync(t.filename),n=(t.nodes&&t.nodes.length?t.nodes[0].lineno:t.lineno)||1;this.linenos&&(this.buf+="\n/* line "+n+" : "+e+" */\n"),this.firebug&&(e="file\\:\\/\\/"+e.replace(/([.:/\\])/g,function(t){return"\\"+("\\"===t?"/":t)}),n="\\00003"+n,this.buf+="\n@media -stylus-debug-info{filename{font-family:"+e+"}line{font-family:"+n+"}}\n")}}),o.register("visitor/evaluator.js",function(t,e,h){var i=h("./index"),d=h("../nodes"),s=h("../stack"),u=h("../stack/frame"),m=h("../utils"),n=h("../functions"),f=h("../path").dirname,r=h("../colors"),o=h("../units");function c(t,e,n){var i,s=this.importStack,r=h("../parser");if(t.once){if(this.requireHistory[e])return d.nil;if(this.requireHistory[e]=!0,n&&!this.includeCSS)return t}if(t.path=e,t.dirname=f(e),i=fs.statSync(e),t.mtime=i.mtime,this.paths.push(t.dirname),~s.indexOf(e))throw new Error("import loop has been found");this.options._imports&&this.options._imports.push(t.clone()),s.push(e),d.filename=e;var o=fs.readFileSync(e,"utf8");if(n&&((n=new d.Literal(o.replace(/\r\n?/g,"\n"))).lineno=n.column=1,!this.resolveURL))return n;var a=new d.Block,l=new r(o,m.merge({root:a},this.options));try{a=l.parse()}catch(t){var c=l.lexer.lineno,p=l.lexer.column;if(this.includeCSS&&this.resolveURL)return this.warn("ParseError: "+e+":"+c+":"+p+". This file included as-is"),n;throw t.filename=e,t.lineno=c,t.column=p,t.input=o,t}(a=a.clone(this.currentBlock)).parent=this.currentBlock,a.scope=!1;var u=this.visit(a);return s.pop(),this.resolveURL&&!this.resolveURL.nocheck||this.paths.pop(),u}var a=t.exports=function(t,e){e=e||{},i.call(this,t);var n=this.functions=e.functions||{};this.stack=new s,this.imports=e.imports||[],this.globals=e.globals||{},this.paths=e.paths||[],this.prefix=e.prefix||"",this.filename=e.filename,this.includeCSS=e["include css"],this.resolveURL=n.url&&"resolver"==n.url.name&&n.url.options,this.paths.push(f(e.filename||".")),this.stack.push(this.global=new u(t)),this.warnings=e.warn,this.options=e,this.calling=[],this.importStack=[],this.ret=0,this.requireHistory={}};a.prototype.__proto__=i.prototype;var l=i.prototype.visit;a.prototype.visit=function(e){try{return l.call(this,e)}catch(t){if(t.filename)throw t;throw t.lineno=e.lineno,t.column=e.column,t.filename=e.filename,t.stylusStack=this.stack.toString(),t}},a.prototype.setup=function(){var t=this.root,n=[];this.populateGlobalScope(),this.imports.forEach(function(t){var e=new d.Expression;e.push(new d.String(t)),n.push(new d.Import(e))},this),t.nodes=n.concat(t.nodes)},a.prototype.populateGlobalScope=function(){var s=this.global.scope;Object.keys(r).forEach(function(t){var e=r[t],n=new d.RGBA(e[0],e[1],e[2],e[3]),i=new d.Ident(t,n);n.name=t,s.add(i)});var e=this.globals;Object.keys(e).forEach(function(t){s.add(new d.Ident(t,e[t]))})},a.prototype.evaluate=function(){return this.setup(),this.visit(this.root)},a.prototype.visitGroup=function(t){return t.nodes=t.nodes.map(function(t){return t.val=this.interpolate(t),t},this),t.block=this.visit(t.block),t},a.prototype.visitReturn=function(t){throw t.expr=this.visit(t.expr),t},a.prototype.visitMedia=function(t){return t.block=this.visit(t.block),t.val=this.visit(t.val),t},a.prototype.visitQueryList=function(t){var e,n;if(t.nodes.forEach(this.visit,this),1==t.nodes.length&&(n=t.nodes[0],e=this.lookup(n.type))){if(!(e=e.first.string))return t;var i=new(h("../parser"))(e,this.options);t=this.visit(i.queries())}return t},a.prototype.visitQuery=function(t){return t.predicate=this.visit(t.predicate),t.type=this.visit(t.type),t.nodes.forEach(this.visit,this),t},a.prototype.visitFeature=function(t){return t.name=this.interpolate(t),t.expr&&(this.ret++,t.expr=this.visit(t.expr),this.ret--),t},a.prototype.visitObject=function(t){for(var e in t.vals)t.vals[e]=this.visit(t.vals[e]);return t},a.prototype.visitMember=function(t){var e=t.left,n=t.right,i=this.visit(e).first;if("object"!=i.nodeName)throw new Error(e.toString()+" has no property ."+n);return t.val&&(this.ret++,i.set(n.name,this.visit(t.val)),this.ret--),i.get(n.name)},a.prototype.visitKeyframes=function(n){var t;return n.fabricated?n:(n.val=this.interpolate(n).trim(),(t=this.lookup(n.val))&&(n.val=t.first.string||t.first.name),n.block=this.visit(n.block),"official"!=n.prefix?n:(this.vendors.forEach(function(t){if("ms"!=t){var e=n.clone();e.val=n.val,e.prefix=t,e.block=n.block,e.fabricated=!0,this.currentBlock.push(e)}},this),d.nil))},a.prototype.visitFunction=function(t){var e=this.stack.currentFrame.scope.lookup(t.name);return e&&this.warn("local "+e.nodeName+' "'+t.name+'" previously defined in this scope'),this.functions[t.name]&&this.warn('user-defined function "'+t.name+'" is already defined'),n[t.name]&&this.warn('built-in function "'+t.name+'" is already defined'),t},a.prototype.visitEach=function(n){this.ret++;var i,t,e=m.unwrap(this.visit(n.expr)),s=e.nodes.length,r=new d.Ident(n.val),o=new d.Ident(n.key||"__index__"),a=this.currentScope,l=this.currentBlock,c=[],p=this;function u(t,e){a.add(e),a.add(t),i=p.visit(n.block.clone()),c=c.concat(i.nodes)}if(this.ret--,n.block.scope=!1,1==s&&"object"==e.nodes[0].nodeName)for(var h in(t=e.nodes[0]).vals)r.val=new d.String(h),o.val=t.get(h),u(o,r);else for(var f=0;f<s;++f)r.val=e.nodes[f],o.val=new d.Unit(f),u(o,r);return this.mixin(c,l),c[c.length-1]||d.nil},a.prototype.visitCall=function(t){var e,n,i=this.lookup(t.name);if(this.ignoreColors="url"==t.name,i&&"expression"==i.nodeName&&(i=i.nodes[0]),i&&"function"!=i.nodeName&&(i=this.lookupFunction(t.name)),!i||"function"!=i.nodeName)return"calc"==this.unvendorize(t.name)?(e=t.args.nodes&&t.args.nodes[0])&&(n=new d.Literal(t.name+e)):n=this.literalCall(t),this.ignoreColors=!1,n;if(this.calling.push(t.name),200<this.calling.length)throw new RangeError("Maximum stylus call stack size exceeded");"expression"==i.nodeName&&(i=i.first),this.ret++;var s=this.visit(t.args);for(var r in s.map)s.map[r]=this.visit(s.map[r].clone());return this.ret--,i.fn?n=this.invokeBuiltin(i.fn,s):"function"==i.nodeName&&(t.block&&(t.block=this.visit(t.block)),n=this.invokeFunction(i,s,t.block)),this.calling.pop(),this.ignoreColors=!1,n},a.prototype.visitIdent=function(t){var e;if(t.property)return(e=this.lookupProperty(t.name))?this.visit(e.expr.clone()):d.nil;if(t.val.isNull){var n=this.lookup(t.name);return n&&t.mixin&&this.mixinNode(n),n?this.visit(n):t}return this.ret++,t.val=this.visit(t.val),this.ret--,this.currentScope.add(t),t.val},a.prototype.visitBinOp=function(t){if("is defined"==t.op)return this.isDefined(t.left);this.ret++;var e=t.op,n=this.visit(t.left),i="||"==e||"&&"==e?t.right:this.visit(t.right),s=t.val?this.visit(t.val):null;this.ret--;try{return this.visit(n.operate(e,i,s))}catch(t){if("CoercionError"==t.name)switch(e){case"==":return d.no;case"!=":return d.yes}throw t}},a.prototype.visitUnaryOp=function(t){var e=t.op,n=this.visit(t.expr);switch("!"!=e&&(n=n.first.clone(),m.assertType(n,"unit")),e){case"-":n.val=-n.val;break;case"+":n.val=+n.val;break;case"~":n.val=~n.val;break;case"!":return n.toBoolean().negate()}return n},a.prototype.visitTernary=function(t){return this.visit(t.cond).toBoolean().isTrue?this.visit(t.trueExpr):this.visit(t.falseExpr)},a.prototype.visitExpression=function(t){for(var e=0,n=t.nodes.length;e<n;++e)t.nodes[e]=this.visit(t.nodes[e]);return this.castable(t)&&(t=this.cast(t)),t},a.prototype.visitArguments=a.prototype.visitExpression,a.prototype.visitProperty=function(t){var e=this.interpolate(t),n=this.lookup(e),i=n&&"function"==n.first.nodeName,s=~this.calling.indexOf(e),r=this.property;if(!i||s||t.literal)return this.ret++,t.name=e,t.literal=!0,(this.property=t).expr=this.visit(t.expr),this.property=r,this.ret--,t;var o=d.Arguments.fromExpression(m.unwrap(t.expr.clone()));t.name=e,this.property=t,this.ret++,this.property.expr=this.visit(t.expr),this.ret--;var a=this.visit(new d.Call(e,o));return this.property=r,a},a.prototype.visitRoot=function(t){if(t!=this.root)return t.constructor=d.Block,this.visit(t);for(var e=0;e<t.nodes.length;++e)t.index=e,t.nodes[e]=this.visit(t.nodes[e]);return t},a.prototype.visitBlock=function(e){for(this.stack.push(new u(e)),e.index=0;e.index<e.nodes.length;++e.index)try{e.nodes[e.index]=this.visit(e.nodes[e.index])}catch(t){if("return"==t.nodeName){if(this.ret)throw this.stack.pop(),t;e.nodes[e.index]=t;break}throw t}return this.stack.pop(),e},a.prototype.visitAtblock=function(t){return t.block=this.visit(t.block),t},a.prototype.visitAtrule=function(t){return t.val=this.interpolate(t),t.block&&(t.block=this.visit(t.block)),t},a.prototype.visitSupports=function(t){var e,n=t.condition;return this.ret++,t.condition=this.visit(n),this.ret--,e=n.first,1==n.nodes.length&&"string"==e.nodeName&&(t.condition=e.string),t.block=this.visit(t.block),t},a.prototype.visitIf=function(t){var e,n=this.currentBlock,i=t.negate;this.ret++;var s=this.visit(t.cond).first.toBoolean();if(this.ret--,t.block.scope=t.block.hasMedia,i)s.isFalse&&(e=this.visit(t.block));else if(s.isTrue)e=this.visit(t.block);else if(t.elses.length)for(var r,o=t.elses,a=o.length,l=0;l<a;++l)if(o[l].cond){if(o[l].block.scope=o[l].block.hasMedia,this.ret++,r=this.visit(o[l].cond).first.toBoolean(),this.ret--,r.isTrue){e=this.visit(o[l].block);break}}else o[l].scope=o[l].hasMedia,e=this.visit(o[l]);return e&&!t.postfix&&n.node&&~["group","atrule","media","supports","keyframes"].indexOf(n.node.nodeName)?(this.mixin(e.nodes,n),d.nil):e||d.nil},a.prototype.visitExtend=function(t){var e=this.currentBlock;return"group"!=e.node.nodeName&&(e=this.closestGroup),t.selectors.forEach(function(t){e.node.extends.push({selector:this.interpolate(t.clone()).trim(),optional:t.optional,lineno:t.lineno,column:t.column})},this),d.nil},a.prototype.visitImport=function(t){this.ret++;var e,n,i=this.visit(t.path).first,s=t.once?"require":"import";if(this.ret--,"url"==i.name){if(t.once)throw new Error("You cannot @require a url");return t}if(!i.string)throw new Error("@"+s+" string expected");var r=i=i.string;if(/(?:url\s*\(\s*)?['"]?(?:#|(?:https?:)?\/\/)/i.test(i)){if(t.once)throw new Error("You cannot @require a url");return t}if(/\.css(?:"|$)/.test(i)&&(n=!0,!t.once&&!this.includeCSS))return t;if(n||/\.styl$/i.test(i)||(i+=".styl"),(e=m.find(i,this.paths,this.filename))||(e=m.lookupIndex(r,this.paths,this.filename)),!e)throw new Error("failed to locate @"+s+" file "+i);for(var o=new d.Block,a=0,l=e.length;a<l;++a)o.push(c.call(this,t,e[a],n));return o},a.prototype.invokeFunction=function(n,i,t){var e=new d.Block(n.block.parent),s=n.block.clone(e),r=this.stack.currentFrame.block;this.stack.push(new u(e));var o=this.currentScope;"arguments"!=i.nodeName&&((l=new d.Expression).push(i),i=d.Arguments.fromExpression(l));if(o.add(new d.Ident("arguments",i)),o.add(new d.Ident("mixin",this.ret?d.no:new d.String(r.nodeName))),this.property){var a=this.propertyExpression(this.property,n.name);o.add(new d.Ident("current-property",a))}else o.add(new d.Ident("current-property",d.nil));for(var l=new d.Expression,c=this.calling.length-1;c--;)l.push(new d.Literal(this.calling[c]));o.add(new d.Ident("called-from",l));c=0;var p=i.nodes.length;return n.params.nodes.forEach(function(t){if(t.rest){for(t.val=new d.Expression;c<p;++c)t.val.push(i.nodes[c]);t.val.preserve=!0,t.val.isList=i.isList}else{var e=i.map[t.name]||i.nodes[c++];if(t=t.clone(),e?e.isEmpty?i.nodes[c-1]=t.val:t.val=e:i.push(t.val),t.val.isNull)throw new Error('argument "'+t+'" required for '+n)}o.add(t)}),t&&o.add(new d.Ident("block",t,!0)),this.invoke(s,!0,n.filename)},a.prototype.invokeBuiltin=function(t,r){r=t.raw?r.nodes:m.params(t).reduce(function(t,e){var n=r.map[e]||r.nodes.shift();if(n){var i=(n=m.unwrap(n)).nodes.length;if(1<i)for(var s=0;s<i;++s)t.push(m.unwrap(n.nodes[s].first));else t.push(n.first)}return t},[]);var e=m.coerce(t.apply(this,r)),n=new d.Expression;return n.push(e),e=n,this.invoke(e)},a.prototype.invoke=function(t,e,n){var i;return n&&this.paths.push(f(n)),this.ret?(i=this.eval(t.nodes),e&&this.stack.pop()):(t=this.visit(t),e&&this.stack.pop(),this.mixin(t.nodes,this.currentBlock),i=d.nil),n&&this.paths.pop(),i},a.prototype.mixin=function(t,e){if(t.length){var n=e.nodes.length,i=e.nodes.slice(0,e.index),s=e.nodes.slice(e.index+1,n);this._mixin(t,i,e),e.index=0,e.nodes=i.concat(s)}},a.prototype._mixin=function(t,e,n){for(var i,s=t.length,r=0;r<s;++r)switch((i=t[r]).nodeName){case"return":return;case"block":this._mixin(i.nodes,e,n);break;case"media":var o=i.block.parent.node;o&&"call"!=o.nodeName&&(i.block.parent=n);case"property":var a=i.expr;i.literal&&"block"==a.first.name&&((a=m.unwrap(a)).nodes[0]=new d.Literal("block"));default:e.push(i)}},a.prototype.mixinNode=function(t){switch((t=this.visit(t.first)).nodeName){case"object":return this.mixinObject(t),d.nil;case"block":case"atblock":return this.mixin(t.nodes,this.currentBlock),d.nil}},a.prototype.mixinObject=function(t){var e,n=h("../parser"),i=this.root,s="$block "+t.toBlock(),r=new n(s,m.merge({root:e},this.options));try{e=r.parse()}catch(t){throw t.filename=this.filename,t.lineno=r.lexer.lineno,t.column=r.lexer.column,t.input=s,t}e.parent=i,e.scope=!1;for(var o=this.visit(e).first.nodes,a=0,l=o.length;a<l;++a)if(o[a].block){this.mixin(o[a].block.nodes,this.currentBlock);break}},a.prototype.eval=function(t){if(!t)return d.nil;var e=t.length,n=d.nil;try{for(var i=0;i<e;++i)switch((n=t[i]).nodeName){case"if":if("block"!=n.block.nodeName){n=this.visit(n);break}case"each":case"block":(n=this.visit(n)).nodes&&(n=this.eval(n.nodes));break;default:n=this.visit(n)}}catch(t){if("return"==t.nodeName)return t.expr;throw t}return n},a.prototype.literalCall=function(t){return t.args=this.visit(t.args),t},a.prototype.lookupProperty=function(t){for(var e,n,i,s=this.stack.length,r=this.currentBlock.index,o=s;s--;)if((n=this.stack[s].block).node)switch(n.node.nodeName){case"group":case"function":case"if":case"each":case"atrule":case"media":case"atblock":case"call":if(e=n.nodes,s+1==o){for(;r--;)if(this.property!=e[r]&&t==this.interpolate(e[r]))return e[r].clone()}else for(i=e.length;i--;)if("property"==e[i].nodeName&&this.property!=e[i]&&t==this.interpolate(e[i]))return e[i].clone()}return e.nil},a.prototype.__defineGetter__("closestBlock",function(){for(var t,e=this.stack.length;e--;)if((t=this.stack[e].block).node)switch(t.node.nodeName){case"group":case"keyframes":case"atrule":case"atblock":case"media":case"call":return t}}),a.prototype.__defineGetter__("closestGroup",function(){for(var t,e=this.stack.length;e--;)if((t=this.stack[e].block).node&&"group"==t.node.nodeName)return t}),a.prototype.__defineGetter__("selectorStack",function(){for(var t,e=[],n=0,i=this.stack.length;n<i;++n)(t=this.stack[n].block).node&&"group"==t.node.nodeName&&(t.node.nodes.forEach(function(t){t.val||(t.val=this.interpolate(t))},this),e.push(t.node.nodes));return e}),a.prototype.lookup=function(t){var e;if(!(this.ignoreColors&&t in r))return(e=this.stack.lookup(t))?m.unwrap(e):this.lookupFunction(t)},a.prototype.interpolate=function(t){var n=this,i="selector"==t.nodeName;function s(t){switch(t.nodeName){case"function":case"ident":return t.name;case"literal":case"string":return!n.prefix||t.prefixed||t.val.nodeName||(t.val=t.val.replace(/\./g,"."+n.prefix),t.prefixed=!0),t.val;case"unit":return"%"==t.type?t.val+"%":t.val;case"member":return s(n.visit(t));case"expression":if(n.calling&&~n.calling.indexOf("selector")&&n._selector)return n._selector;n.ret++;var e=s(n.visit(t).first);return n.ret--,i&&(n._selector=e),e}}return t.segments?t.segments.map(s).join(""):s(t)},a.prototype.lookupFunction=function(t){var e=this.functions[t]||n[t];if(e)return new d.Function(t,e)},a.prototype.isDefined=function(t){if("ident"==t.nodeName)return d.Boolean(this.lookup(t.name));throw new Error('invalid "is defined" check on non-variable '+t)},a.prototype.propertyExpression=function(t,n){var e=new d.Expression,i=t.expr.clone();return e.push(new d.String(t.name)),function t(e){return"call"==e.nodeName&&n==e.name?new d.Literal("__CALL__"):(e.nodes&&(e.nodes=e.nodes.map(t)),e)}(i),e.push(i),e},a.prototype.cast=function(t){return new d.Unit(t.first.val,t.nodes[1].name)},a.prototype.castable=function(t){return 2==t.nodes.length&&"unit"==t.first.nodeName&&~o.indexOf(t.nodes[1].name)},a.prototype.warn=function(t){this.warnings&&console.warn("[33mWarning:[0m "+t)},a.prototype.__defineGetter__("currentBlock",function(){return this.stack.currentFrame.block}),a.prototype.__defineGetter__("vendors",function(){return this.lookup("vendors").nodes.map(function(t){return t.string})}),a.prototype.unvendorize=function(t){for(var e=0,n=this.vendors.length;e<n;e++)if("official"!=this.vendors[e]){var i="-"+this.vendors[e]+"-";if(~t.indexOf(i))return t.replace(i,"")}return t},a.prototype.__defineGetter__("currentScope",function(){return this.stack.currentFrame.scope}),a.prototype.__defineGetter__("currentFrame",function(){return this.stack.currentFrame})}),o.register("visitor/normalizer.js",function(t,e,n){var i=n("./index"),c=n("../nodes/index"),s=n("../utils"),r=t.exports=function(t,e){e=e||{},i.call(this,t),this.hoist=e["hoist atrules"],this.stack=[],this.map={},this.imports=[]};r.prototype.__proto__=i.prototype,r.prototype.normalize=function(){var t=this.visit(this.root);return this.hoist&&(this.imports.length&&(t.nodes=this.imports.concat(t.nodes)),this.charset&&(t.nodes=[this.charset].concat(t.nodes))),t},r.prototype.bubble=function(e){var n=[],i=[],s=this;if(function e(t){t.nodes.forEach(function(t){switch((t=s.visit(t)).nodeName){case"property":n.push(t);break;case"block":e(t);break;default:i.push(t)}})}(e.block),n.length){var t=new c.Selector([new c.Literal("&")]);t.lineno=e.lineno,t.column=e.column,t.filename=e.filename,t.val="&",(r=new c.Group).lineno=e.lineno,r.column=e.column,r.filename=e.filename;var r,o=new c.Block(e.block,r);o.lineno=e.lineno,o.column=e.column,o.filename=e.filename,n.forEach(function(t){o.push(t)}),r.push(t),r.block=o,e.block.nodes=[],e.block.push(r),i.forEach(function(t){e.block.push(t)}),(r=this.closestGroup(e.block))&&(e.group=r.clone()),e.bubbled=!0}},r.prototype.closestGroup=function(t){for(var e,n=t.parent;n&&(e=n.node);){if("group"==e.nodeName)return e;n=e.block&&e.block.parent}},r.prototype.visitRoot=function(t){for(var e,n=new c.Root,i=0;i<t.nodes.length;++i)switch((e=t.nodes[i]).nodeName){case"null":case"expression":case"function":case"unit":case"atblock":continue;default:this.rootIndex=i,n.push(this.visit(e))}return n},r.prototype.visitProperty=function(t){return this.visit(t.expr),t},r.prototype.visitExpression=function(n){return n.nodes=n.nodes.map(function(t){if("block"==t.nodeName){var e=new c.Literal("block");return e.lineno=n.lineno,e.column=n.column,e}return t}),n},r.prototype.visitBlock=function(t){var e;if(t.hasProperties)for(var n=0,i=t.nodes.length;n<i;++n)switch((e=t.nodes[n]).nodeName){case"null":case"expression":case"function":case"group":case"unit":case"atblock":continue;default:t.nodes[n]=this.visit(e)}for(n=0,i=t.nodes.length;n<i;++n)e=t.nodes[n],t.nodes[n]=this.visit(e);return t},r.prototype.visitGroup=function(a){var l,t=this.stack,e=this.map;a.nodes.forEach(function(t,e){if(~t.val.indexOf(","))if(~t.val.indexOf("\\,"))t.val=t.val.replace(/\\,/g,",");else{l=t.val.split(",");for(var n,i,s="/"==t.val.charAt(0),r=0,o=l.length;r<o;++r)n=l[r].trim(),s&&0<r&&!~n.indexOf("&")&&(n="/"+n),(i=new c.Selector([new c.Literal(n)])).val=n,i.block=a.block,a.nodes[e++]=i}}),t.push(a.nodes);var n=s.compileSelectors(t,!0);return n.forEach(function(t){e[t]=e[t]||[],e[t].push(a)}),this.extend(a,n),t.pop(),a},r.prototype.visitFunction=function(){return c.nil},r.prototype.visitMedia=function(s){var e,r=[],n=this.closestGroup(s.block);return function n(i){i.nodes.forEach(function(t,e){switch(t.nodeName){case"media":t.val=s.val.merge(t.val),r.push(t),i.nodes[e]=c.nil;break;case"block":n(t);break;default:t.block&&t.block.nodes&&n(t.block)}})}(s.block),this.bubble(s),r.length&&r.forEach(function(t){n?n.block.push(t):this.root.nodes.splice(++this.rootIndex,0,t),t=this.visit(t),e=t.block.parent,!t.bubbled||n&&"group"!=e.node.nodeName||(t.group.block=t.block.nodes[0].block,t.block.nodes[0]=t.group)},this),s},r.prototype.visitSupports=function(t){return this.bubble(t),t},r.prototype.visitAtrule=function(t){return t.block&&(t.block=this.visit(t.block)),t},r.prototype.visitKeyframes=function(t){var e=t.block.nodes.filter(function(t){return t.block&&t.block.hasProperties});return t.frames=e.length,t},r.prototype.visitImport=function(t){return this.imports.push(t),this.hoist?c.nil:t},r.prototype.visitCharset=function(t){return this.charset=t,this.hoist?c.nil:t},r.prototype.extend=function(t,i){var s=this.map,r=this,o=this.closestGroup(t.block);t.extends.forEach(function(t){var n=s[t.selector];if(!n){if(t.optional)return;var e=new Error('Failed to @extend "'+t.selector+'"');throw e.lineno=t.lineno,e.column=t.column,e}i.forEach(function(t){var e=new c.Selector;e.val=t,e.inherits=!1,n.forEach(function(t){o&&o==t||r.extend(t,i),t.push(e)})})}),t.block=this.visit(t.block)}}),o("stylus")}();